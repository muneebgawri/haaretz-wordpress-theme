"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2412],{42412:function(e,t,n){n.d(t,{Z:function(){return N}});var i=n(31737),r=n(32735),o=n(89111),a=n(46582),s=n.n(a),c=n(35837),u=n(72708),d=n(94703),l=n(13013),f=n(67094),h=n(28730),g=n(47946),p=n(59639),m=n(77509),v=n(19851),w=n(26124),y=n(22152),x=n(74512),j=function(e){(0,m.Z)(i,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,w.Z)(i);if(t){var r=(0,w.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,v.Z)(this,e)});function i(){return(0,g.Z)(this,i),n.apply(this,arguments)}return(0,p.Z)(i,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return(0,x.jsx)(y.Z,{children:(0,x.jsxs)(s(),{children:[(0,x.jsx)("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:'\n          !function(n,e,i) {\n      if(!n){n=n||{},window.permutive=n,n.q=[],n.config={}||{},n.config.apiKey=e,n.config.environment=n.config.environment||"production";for(var o=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],r=0;r<o.length;r++){var t=o[r];n[t]=function(e){return function(){var i=Array.prototype.slice.call(arguments,0);n.q.push({functionName:e,arguments:i})}}(t)}}}(window.permutive,"b22711f5-0497-4009-9336-19f02a418aa1");\n    window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){if(0===window.googletag.pubads().getTargeting("permutive").length){var g=window.localStorage.getItem("_pdfps");window.googletag.pubads().setTargeting("permutive",g?JSON.parse(g):[])}});\n     permutive.addon("web", {\n            page: '.concat(JSON.stringify({publisher:"haaretz"}),"\n          });\n          ")}}),(0,x.jsx)("script",{async:!0,id:"permutive_load",src:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/5df8e9c7-77da-4197-8c3e-fc21422d0462-web.js"})]})})}}]),i}(r.Component),b=n(46554),S=n(28936),Z=n(92728),T=n(60134),O=n.n(T),k=n(33108),E=n.n(k),L=n(89915),C=n(95463);function _(e){var t=e.children,n=(0,c.useRouter)(),i=n&&n.query.path||"/",r={model:n.query.previewId&&"/"!==i?{id:n.query.previewId}:{path:i}},o=(0,u.aM)(O(),{variables:r}),a=o.data,s=o.error,d=o.loading;return((0,C.Z)("undefined"!=typeof document&&"/"===new URL(document.location.href).pathname&&!window.sessionStorage.getItem("mainArticleHref"),function(){var e=document.querySelector('[data-main="mainBlock"] a');e&&(window.sessionStorage.setItem("mainArticleHref",e.href),window.addEventListener("focus",function t(){window.sessionStorage.setItem("mainArticleHref",e.href),window.removeEventListener("focus",t)}))}),d)?null:s?s.graphQLErrors[0]&&s.graphQLErrors[0].extensions&&s.graphQLErrors[0].extensions.response&&s.graphQLErrors[0].extensions.response.status&&"number"==typeof s.graphQLErrors[0].extensions.response.status?(0,x.jsx)(L.Z,{errorCode:s.graphQLErrors[0].extensions.response.status,kind:"error",message:"Brighspot is down, Call Avi Kaufman.",path:i}):(0,x.jsx)(L.Z,{path:i,errorCode:404,kind:"error",message:"Brighspot is down, Call Avi Kaufman."}):null!=a&&a.Page?"function"!=typeof t?null:t({data:a}):(E().error("no data for path '".concat(i,"'")),(0,x.jsx)(L.Z,{path:i,errorCode:404,kind:"error",message:"Something went wrong. Call Eran Meshulam."}))}var z=n(42022),I=n(76412),P=n(63004),R=n(72342),H=n(33603),A=n(39259),q=n(31099),B=n(22949),D=n(59174);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q(e){var t,n=e.render,i=e.isGroupS,a=e.autoRefresh,g=(e.canonicalUrlOverride,e.pageTypeOverride),p=e.responseWriteHead,m=e.responseEnd,v=e.organizationSchema,w=e.data,T=(0,c.useRouter)(),O=(0,q.DN)().biAction,k=T&&T.query.path||"/",E=T&&T.asPath||"/",L=(0,u.xJ)(),_=(0,D.Z)().siteAlias,U=(0,I.D)().isBot,M=(null==w?void 0:w.Page)||{},Q=M.pageType,N=M.pageDateTimeString,F=null==w?void 0:null===(t=w.Page)||void 0===t?void 0:t.redirect,W=(0,z.Z)(),G=(0,P.Z)(),J=k.includes("/labels")||k.includes("/haaretz-labels");if((0,C.Z)(window.localStorage.getItem("refresh")&&"function"==typeof O&&O.length>0,function(){O({actionCode:4,feature:"Auto refresh page",featureType:"Content"}),window.localStorage.removeItem("refresh");var e=new B.ZP(_);if(window.addEventListener("focus",function t(){var n=document.querySelector('[data-main="mainBlock"] a');if(e.removeBadge(),n){var i=n.href;window.sessionStorage.setItem("mainArticleHref",i),window.removeEventListener("focus",t)}}),"undefined"!=typeof document&&"/"===new URL(document.location.href).pathname&&document.hidden){var t=document.querySelector('[data-main="mainBlock"] a');t&&t.href!==window.sessionStorage.getItem("mainArticleHref")&&e.addBadge()}}),F){if(m&&p){var K=(0,H.t)(F),$=K.computedHref,V=K.computedPathname,X=((E||"").match(/\?(.*)/)||[])[1],Y=X?"".concat(F).concat(F.includes("?")?"&":"?").concat(X):F;(0,Z.Z)(m,p,Y,301,$,V)}return null}var ee=Array.isArray(G)?G[0].contentId:null;return L.writeData({data:{globalLazyload:!1,title:W&&W.metaTitle,pageDateTimeString:N,pageType:g||Q,path:k,isBot:U||null,sectionId:ee,isOsakaDisplayed:!1,canonicalUrl:W&&W.canonicalUrl,isLabel:J}}),(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(A.Z,{}),(0,x.jsxs)(s(),{children:[a&&(0,x.jsx)("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:"\n            window.__HTZ = window.__HTZ || {};\ntry {\n  if (typeof window.__HTZ.cancelRefresh === 'function') {\n    window.__HTZ.cancelRefresh();\n  }\n  if (window.matchMedia(\"(min-width: 37.5em)\").matches) {\n    var refreshTimer = setTimeout(\n      function refreshWindow() {\n        typeof window != 'undefined' &&  window.localStorage.setItem('refresh', 'true');\n        typeof window != 'undefined' &&  window.location.reload()\n      },\n      ".concat(3e5," // BADGE: reduce numbers to increase refresh rates for testing, original is 1000 * 60 * 5 = ").concat(3e5,"\n    );\n    window.__HTZ.cancelRefresh = function cancelRefresh() {\n      clearTimeout(refreshTimer);\n      window.__HTZ.cancelRefresh.activated = true;\n      window.localStorage.removeItem('refresh');\n    };\n  }\n}\ncatch (err) {console.log(err)}")}}),v&&(0,x.jsx)("script",{type:"application/ld+json","data-schema":"Organization",dangerouslySetInnerHTML:{__html:v}})]}),(0,x.jsx)(f.Z,{}),(0,x.jsx)(h.ZP,{}),(0,x.jsx)(y.Z,{children:(0,x.jsx)(b.Z,{})}),(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(d.Z,{}),(0,x.jsx)(l.Z,{}),(0,x.jsx)("div",{id:"maavaron"}),(0,x.jsx)("h1",{children:i}),(0,x.jsx)(o.Z,{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:n({globalLazyload:!1})})]}),(0,x.jsx)(S.Z,{scriptTag:"permutive",children:(0,x.jsx)(j,{})}),(0,x.jsx)(R.O,{})]})}function N(e){return(0,x.jsx)(_,{children:function(t){var n=t.data;return(0,x.jsx)(Q,M(M({},e),{},{data:n}))}})}Q.defaultProps={autoRefresh:!0,canonicalUrlOverride:null,pageTypeOverride:null,responseWriteHead:null,responseEnd:null,organizationSchema:null}},46554:function(e,t,n){var i=n(32735),r=n(28176);t.Z=function(){return i.useEffect(function(){var e=(0,r.cf)(),t=Object.keys(e);t.length<=0?(0,r.HQ)():t.forEach(function(t){(0,r.mh)(e[t]).then(function(){var e=(0,r.cf)();delete e[t],(0,r.Ah)(e)}).catch(function(e){console.error(e)})})},[]),null}},22949:function(e,t,n){n.d(t,{GM:function(){return s},ZP:function(){return o},lD:function(){return c}});var i=n(47946),r=n(59639),o=function(){function e(t){(0,i.Z)(this,e),Object.assign(this,{backgroundColor:"#f00",size:.3,position:"ne",radius:"htz"===t?10:"tm"===t?3:5,src:"",onChange:function(){}}),this.canvas=document.createElement("canvas"),this.faviconEL=document.querySelector("link[rel$=icon]"),this.src=this.src||this.faviconEL.getAttribute("href"),this.ctx=this.canvas.getContext("2d")}return(0,r.Z)(e,[{key:"drawIcon",value:function(){this.ctx.clearRect(0,0,this.faviconSize,this.faviconSize),this.ctx.drawImage(this.img,0,0,this.faviconSize,this.faviconSize)}},{key:"drawShape",value:function(){var e=this.radius,t=this.offset.x,n=this.offset.y,i=this.offset.x+this.badgeSize,r=this.offset.y+this.badgeSize;this.ctx.beginPath(),this.ctx.moveTo(i-e,n),this.ctx.quadraticCurveTo(i,n,i,n+e),this.ctx.lineTo(i,r-e),this.ctx.quadraticCurveTo(i,r,i-e,r),this.ctx.lineTo(t+e,r),this.ctx.quadraticCurveTo(t,r,t,r-e),this.ctx.lineTo(t,n+e),this.ctx.quadraticCurveTo(t,n,t+e,n),this.ctx.fillStyle=this.backgroundColor,this.ctx.fill(),this.ctx.closePath()}},{key:"drawFavicon",value:function(){this.faviconEL.setAttribute("href",this.dataURL)}},{key:"draw",value:function(e){this.drawIcon(),e&&this.drawShape(),this.drawFavicon()}},{key:"setup",value:function(){this.faviconSize=this.img.naturalWidth,this.badgeSize=this.faviconSize*this.size,this.canvas.width=this.faviconSize,this.canvas.height=this.faviconSize;var e=this.faviconSize-this.badgeSize,t=e/2;this.offset=({n:{x:t,y:0},e:{x:e,y:t},s:{x:t,y:e},w:{x:0,y:t},nw:{x:0,y:0},ne:{x:e,y:0},sw:{x:0,y:e},se:{x:e,y:e}})[this.position]}},{key:"update",value:function(e){var t=this;this.img?(this.draw(e),this.onChange&&this.onChange.call(this)):(this.img=new Image,this.img.addEventListener("load",function(){t.setup(),t.draw(e),t.onChange&&t.onChange.call(t)}),this.img.src=this.src)}},{key:"dataURL",get:function(){return this.canvas.toDataURL()}},{key:"addBadge",value:function(){this.added||(this.update(!0),this.added=!0)}},{key:"removeBadge",value:function(){this.added&&(this.update(!1),this.added=!1)}}]),e}(),a=/^\(\d*\) /;function s(e){document.title.match(a)?document&&(document.title=document.title.replace(a,"(".concat(e,") "))):document&&(document.title="(".concat(e,") ").concat(document.title))}function c(){document&&(document.title=document.title.replace(a,""))}}}]);
//# sourceMappingURL=2412-6b2c657532e0daf4.js.map