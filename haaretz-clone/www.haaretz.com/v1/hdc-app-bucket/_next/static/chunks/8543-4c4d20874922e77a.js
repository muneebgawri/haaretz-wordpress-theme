(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8543,9645],{69645:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(31737),i=n(17774);n(32735);var a=n(99),s=n(71729),o=n(52293),l=n(74512),u=["size","fill","color","attrs","miscStyles"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e){var t=e.size,n=e.fill,r=e.color,o=e.attrs,c=e.miscStyles,d=(0,i.Z)(e,u),p=(0,a.Z)({size:t,fill:n,color:r,miscStyles:c}).css(s.Z);return(0,l.jsxs)("svg",m(m(m({width:"1em",height:"1em",viewBox:"0 0 256 256",className:p},d),o),{},{"data-test":"IconMarkerLogoTransparent",children:["  ",(0,l.jsx)("path",{fill:"currentColor",d:"M128 8a120 120 0 100 240 120 120 0 000-240zm63 173h-29v-77l-20 77h-28l-19-77v77H66V75h48l14 60 14-60h49v106z"})]}))}d.defaultProps=o.f},92142:function(e,t,n){"use strict";var r=n(31737),i=n(99276),a=n(32735),s=n(82070),o=n.n(s),l=n(99),u=n(58535),c=n(31099),m=n(2637),d=n(70231),p=n(74512);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var g=o()(function(){return n.e(6886).then(n.bind(n,76886))},{loading:function(){return null},loadableGenerated:{webpack:function(){return[76886]}}}),b={default:o()(function(){return n.e(8851).then(n.bind(n,88851))},{loading:function(){return null},loadableGenerated:{webpack:function(){return[88851]}}}),variationB:o()(function(){return n.e(252).then(n.bind(n,10252))},{loading:function(){return null},loadableGenerated:{webpack:function(){return[10252]}}})};function y(e){var t=e.teaserBody,n=e.teaserButton,r=e.biAction,s=e.biImpression,o=e.href,u=e.inView,c=e.isPersonal,f=e.miscStyles,y=e.actionNumber,v=e.actionFeatureType,h=e.segmentName,x=e.segmentNumber,w=e.tagNumber,N=(e.signedUp,e.afterSignUp),j=e.email,k=e.icon,S=e.isSubscriber,O=e.subscribersOnly,I=e.site,T=e.origin,P=e.featureName,Z=e.headlineText,C=e.segmentId,D=e.gaAction,E=e.resourceType,A=e.resourceId,B=(0,a.useState)(!0),V=B[0],R=B[1],F=(0,l.Z)().theme,M=a.useState(!1),U=(0,i.Z)(M,2),q=U[0],z=U[1],_=(0,d.aF)().user,W=(null==_?void 0:_.type)==="paying",G=(0,m.Z)(),L=b[F.newsletterStyle.mobileViewVariation]||b.default,H=S||!O;return((0,a.useEffect)(function(){u&&V&&setTimeout(function(){D&&D({category:"".concat(c?"Personal":"Regular","_Mobile_Newsletter"),action:"Impression",label:h}),s({segmentName:h,segmentId:w||x,newsletterEmail:j,featureType:"Content",feature:"".concat(c?"Personal":"Regular","-Newsletter"),campaignDetails:t})},500)&&R(!1)},[s,j,D,u,c,h,x,w,V,t]),q)?(0,p.jsx)(g,{icon:k,segmentName:h}):(0,p.jsx)(L,{icon:k,teaserBody:t,teaserButton:n,href:!G||H?o:void 0,onClick:function(e){D&&D({category:"".concat(c?"Personal":"Regular","_Mobile_Newsletter"),action:"Click",label:h}),r(y?{actionCode:y,featureType:"Content",feature:"".concat(c?"Personal":"Regular","-Newsletter"),campaignDetails:t}:"Marketing"===v?{actionCode:3,newsletterEmail:j,featureType:"Marketing",feature:"".concat(c?"Personal":"Regular","-Newsletter"),campaignDetails:t}:{actionCode:165,segmentId:w||x,segmentName:h,newsletterEmail:j,featureType:"Content",feature:"".concat(c?"Personal":"Regular","-Newsletter"),campaignDetails:t}),!G||H||W?N&&N():W||(e.preventDefault(),e.stopPropagation(),z(!0))},miscStyles:f,segmentName:h,tagNumber:w,site:I,origin:T,isRegularFlow:H,featureName:P,headlineText:Z,segmentId:C,gaAction:D,resourceId:A,resourceType:E})}y.defaultProps={biAction:null,biImpression:null,segmentName:null,segmentNumber:null,tagNumber:null,miscStyles:null,inView:null,isPersonal:!1,afterSignUp:null,email:null,icon:"htz",isSubscriber:!1,subscribersOnly:!1,site:null,origin:"yellow-element",featureName:null,headlineText:null,segmentId:null,gaAction:null,resourceId:null,resourceType:"newsletter"},t.Z=function(e){return(0,p.jsx)(c.ZP,{children:function(t){var n=t.gaAction,i=t.biAction,a=t.biImpression;return(0,p.jsx)(u.df,{triggerOnce:!0,rootMargin:"10px",children:function(t){var s=t.inView,o=t.ref;return(0,p.jsx)("div",{ref:o,children:(0,p.jsx)(y,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({inView:s,gaAction:n,biAction:i,biImpression:a},e))})}})}})}},97494:function(e,t,n){"use strict";n.d(t,{W:function(){return d}});var r=n(32735),i=n(4881),a=n.n(i),s=n(70231),o=n(12835),l=n(92142),u=n(69236),c=n(59174),m=n(74512),d=function(e){var t=e.user,n=e.tagNumber,r=e.feature,i=a().has("siteNumber")?a().get("siteNumber"):80;return"subscribe/".concat("segId=".concat(n,"/")).concat("pfm=Mobile/").concat("site=".concat(i,"/")).concat("aid=".concat(t.anonymousId,"/")).concat(r?"feat=".concat(r,"/"):"").concat("@newsletters.haaretz.co.il").replace(/\//g,"---").replace(/=/g,"--")},p=function(e){var t=e.user,n=e.tagNumber,r=e.doubleOptIn,i=e.mailSubject,a=e.mailBody,s=e.feature,o=n?d({user:t,tagNumber:n,feature:s}):(null==t?void 0:t.email)||"";return"mailto:".concat(void 0===r?"doptinf":r,"-").concat(o,"?subject=").concat(i,"&body=").concat(a)};function f(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],a=(0,o.Z)({query:{until:"s"}}),d=(0,u.Z)(),f=(0,c.Z)().isHDC,g=e.mobileTitle,b=e.doubleOptIn,y=e.mobileEmailSubject,v=e.mobileEmailBody,h=e.mobileButton,x=e.miscStyles,w=e.tagNumber,N=e.isSubscriber,j=e.subscribersOnly,k=e.segmentName,S=e.icon,O=e.site,I=e.origin,T=e.featureName,P=e.headlineText,Z=e.segmentId,C=e.gaAction,D=e.resourceType,E=e.resourceId;return d&&!f&&"writer"!==D?null:a&&(0,m.jsx)(s.ZP,{render:function(e){var t=p({user:e.user,tagNumber:w,doubleOptIn:b,mailSubject:y,mailBody:v,feature:"regular"});return(0,m.jsx)(l.Z,{teaserBody:g,teaserButton:h,href:t,miscStyles:x,signedUp:n,afterSignUp:function(){return i(!0)},isSubscriber:N,subscribersOnly:j,segmentName:k,icon:S,tagNumber:w,resourceType:D,resourceId:E,site:O,origin:I,featureName:T,headlineText:P,segmentId:Z,gaAction:C})}})}f.defaultProps={miscStyles:null,isSubscriber:!1,subscribersOnly:!1,segmentName:null,site:"htz",origin:null,featureName:null,headlineText:null,segmentId:null,gaAction:null,resourceType:"newsletter",resourceId:null},t.Z=f},66458:function(e,t,n){"use strict";n.d(t,{Z:function(){return em}});var r=n(31652),i=n(32735),a=n(99),s=n(58535),o=n(96457),l=n(89973),u=n(31737),c=n(89111),m=n(4881),d=n.n(m),p=n(43799),f=n(59702),g=n(73780),b=n(74512);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h=function(e){var t=e.theme,n=e.variant;return{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",extend:[(0,o.Z)(void 0,n,t.mq,x,t.color,t)]}};function x(e,t,n){return{backgroundColor:n("newsletter","".concat(t,"Bg")),color:n("newsletter","".concat(t,"Text"))}}var w=function(e){var t=e.theme,n=e.variant;return{paddingBottom:"1rem",extend:[t.type(-1),(0,o.Z)(void 0,n,t.mq,N,t.color)]}};function N(e,t,n,r){return{color:n("newsletter","".concat(t,"TextTitle"))}}var j={display:"inline-block",position:"absolute",left:"0",top:"0.5rem",paddingTop:"0"},k={marginTop:"1rem",type:-1,marginBottom:"1rem"};function S(e){var t=e.closeConfirmation,n=e.variant,r=e.host,a=e.signUpStatus,s=e.signUpEmail,o=e.displayDialogButton,l=e.biAction,u=e.biImpression,m=s&&s.includes("gmail"),y="pending"===a,x=d().get("domain"),N="themarker.com"===x?"tm":"haaretz.com"===x?"hdc":"htz";return i.useEffect(function(){m&&y&&u&&u({featureType:"Content",feature:"Sniper link",campaignName:"Regular-Newsletter",campaignDetails:"Gmail"})},[u,m,y]),(0,b.jsx)(c.Z,{variant:n,style:h,children:function(e){var i=e.className,s=e.theme;e.css;var u=s.newsletterI18n,d=u.buttons.newsletterConfirmedButton,h=u.texts,x=h.newsletterConfirmedText,S=h.newsletterConfirmedTitleText;return(0,b.jsxs)("div",{className:i,children:[(0,b.jsx)(p.Z,{isFlat:!0,boxModel:{hp:1,vp:1},onClick:t,variant:s.newsletterStyle[n].buttonVariant,miscStyles:j,children:(0,b.jsx)(f.Z,{size:2})}),(0,b.jsx)(c.Z,{variant:n,style:w,as:"p",children:(0,b.jsx)("strong",{children:S[a]})}),(0,b.jsx)(c.Z,{variant:n,style:w,as:"p",children:m&&y?(0,b.jsxs)("div",{children:[x.pendingWithGmail.txt1," ",(0,b.jsx)(g.Z,{href:x.pendingWithGmail.href(a),tagName:"a",target:"_blank",rel:"noopener noreferrer",onClick:function(){return l({actionCode:169,featureType:"Content",feature:"Sniper link",campaignName:"Regular-Newsletter",campaignDetails:"Gmail"})},children:x.pendingWithGmail.txt2})," ",x.pendingWithGmail.txt3]}):x[a]}),o?(0,b.jsx)(p.Z,v(v({boxModel:{hp:3,vp:1},miscStyles:k,variant:s.newsletterStyle[n].buttonVariant},"failed"===a?{onClick:function(){return t()}}:{href:"tm"===(r||N)?"https://bit.ly/newsletters-tm":"hdc"===(r||N)?"https://bit.ly/newsletters-hdc":"https://bit.ly/newsletters-htz"}),{},{children:d[a]})):null]})}})}S.defaultProps={host:null,variant:"highlight",displayDialogButton:!0,biAction:null,biImpression:null};var O=n(78756),I=n(99276),T=n(80850),P=n.n(T),Z=n(72322),C=n.n(Z),D=n(35837),E=n(30061),A=n.n(E),B=n(72708),V=n(84866),R=n(33603),F=n(75498),M=n(31493),U=n(55964),q=n(60265),z=n(69645),_=n(2637),W=n(36570),G=function(e){var t=e.theme;return{display:"block",height:"2rem",width:"2rem",position:"absolute",insetInlineEnd:"1rem",top:"1rem",":after":{content:'""',position:"absolute",height:"2px",width:"100%",top:"50%",end:0,backgroundColor:t.color("neutral",-1),transform:"rotate(45deg)"},":before":{content:'""',position:"absolute",height:"2px",width:"100%",top:"50%",end:0,backgroundColor:t.color("neutral",-1),transform:"rotate(-45deg)"}}};function L(e){var t=e.segmentName,n=e.onClose,r=(0,a.Z)(),i=r.css,s=r.theme;return(0,b.jsxs)("div",{className:i({display:"flex",alignItems:"center",flexDirection:"column",padding:"1rem",extend:[s.type(-1)]}),children:[(0,b.jsxs)("button",{type:"button",className:i(G),onClick:n,children:[(0,b.jsx)("span",{className:i()}),(0,b.jsx)(W.Z,{children:"סגירה"})]}),(0,b.jsx)("div",{className:i({textAlign:"center",fontWeight:700,marginBottom:"2rem",position:"relative"}),children:s.newsletterI18n.subscribersOnly.text(t).map(function(e){return(0,b.jsx)("div",{children:e})})}),(0,b.jsx)("div",{children:(0,b.jsx)(p.Z,{href:s.newsletterI18n.subscribersOnly.button.href,boxModel:{hp:5,vp:.5},variant:s.newsletterI18n.subscribersOnly.button.variant,children:s.newsletterI18n.subscribersOnly.button.text})})]})}var H=n(44162);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){(0,u.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Q=(0,n(59174).Z)().siteAlias,X=function(e){return e.theme,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"row"}},Y=function(e){var t=e.theme,n=e.variant;return{fontWeight:"bold",extend:[t.type(-1),(0,o.Z)(void 0,n,t.mq,$,t.color)]}};function $(e,t,n,r){return{color:n("newsletter","".concat(t,"TextTitle"))}}var ee=function(e){return{paddingTop:"2rem",extend:[e.theme.mq({from:"s"},{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexDirection:"row"})]}},et={width:"100%",marginTop:"1rem"},en={marginTop:"1rem",type:-1,display:"block",marginInlineEnd:"auto",marginInlineStart:[{from:"s",value:"1rem"},{until:"s",value:"auto"}]};ea.defaultProps={buttonText:null,icon:null,biAction:null,biImpression:null,gaAction:null,inView:null,segmentName:null,platform:"Desktop",host:null,isSubscriber:!1,subscribersOnly:!1,origin:"yellow-element",setParentEmailState:null,resourceType:"newsletter",resourceId:null};var er=d().has("siteNumber")?d().get("siteNumber"):80,ei=10===er||20===er?"tm":85===er?"hdc":"htz";function ea(e){var t=e.buttonText,n=e.headlineText,r=e.icon,s=e.featureName,o=e.loading,l=e.segmentId,u=e.segmentName,c=e.tagNumber,m=e.resourceType,d=e.resourceId,f=e.setParentState,g=e.signupNewsletter,y=e.user,v=(e.platform,e.variant),h=e.gaAction,x=e.biAction,w=e.biImpression,N=e.inView,j=e.host,k=e.origin,S=e.isSubscriber,T=e.subscribersOnly,Z=e.setParentEmailState,E=(0,D.useRouter)(),W=(0,_.Z)(),G=(0,i.useState)(!0),J=G[0],$=G[1],er=(0,B.xJ)(),ea=(0,a.Z)({variant:v}),es=ea.css,eo=ea.theme,el=i.useState(!1),eu=(0,I.Z)(el,2),ec=eu[0],em=eu[1],ed=(null==y?void 0:y.type)==="paying",ep=r&&("htz"===r.toLowerCase()?q.default:"tm"===r.toLowerCase()?z.default:null),ef=void 0!==E.query.segmentId;(0,i.useEffect)(function(){N&&J&&setTimeout(function(){h({category:s.replace(/-/g,"_"),action:"Impression",label:u}),w({segmentId:l,segmentName:u,newsletterEmail:y&&y.email,featureType:"Content",feature:s,campaignDetails:n,campaignName:m})},500)&&$(!1)},[N,J,h,u,w,l,n,y,s,m]);var eg=eo.textInputI18n,eb=eg.requiredLong,ey=eg.requiredShort,ev=eo.newsletterStyle,eh=eo.newsletterI18n.input,ex=eh.emptyEmailError,ew=eh.invalidEmailError,eN=S||!T;return ec?(0,b.jsx)(L,{segmentName:u,onClose:function(){return em(!1)}}):(0,b.jsx)(V.Z,{render:function(e){var r,i=e.register;return(0,b.jsx)(M.Z,{clearFormAfterSubmit:!1,initialValues:{email:y.email},onSubmit:(r=(0,O.Z)(P().mark(function e(t){var r,a,o,p;return P().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Z(r=t.email),e.next=4,er.query({query:A(),variables:{email:r,site:Q.toLocaleUpperCase()}});case 4:if(p=(o=(null==(a=e.sent.data)?void 0:a.userLogin)||{isPaying:!1,ssoId:""}).isPaying,!(!o.ssoId&&"anonymous"===y.type)){e.next=12;break}return e.next=10,(0,H.s)({email:r,register:i});case 10:"success"===e.sent.status&&x({actionCode:60,newsletterEmail:r,featureType:"Content",feature:s,campaignDetails:n});case 12:!W||eN||p?g({variables:{input:{userEmail:r,segmentName:u,tagNumber:c||d,resourceId:d||c,resourceType:m,origin:k||"yellow-element",site:j||ei,caller:"server"}}}).then(function(e){var t=e.data,i=((null==t?void 0:t.newsletterSignup)||{}).status;h({category:s.replace(/-/g,"_"),action:"Click",label:u}),x({actionCode:9,segmentId:l,segmentName:u,newsletterEmail:r,featureType:"Content",feature:s,campaignDetails:n,campaignName:m}),f(i)}).catch(function(e){console.warn("there was an error sending the query",e),f("failed")}):p||em(!0);case 13:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),validate:function(e){var t=e.email,n=[];return t||n.push({name:"email",order:1,errorText:ex}),t&&!C()(t)&&n.push({name:"email",order:1,errorText:ew}),n},render:function(e){var r=e.getInputProps,i=e.handleSubmit;return(0,b.jsxs)("div",{className:es(function(e){var t;return(t=K(K({},e),{},{host:j})).theme,{textAlign:"hdc"===t.host?"end":"start"}}),children:[(0,b.jsxs)("div",{className:es(X),children:[ef?null:(0,b.jsx)(F.Z,{className:es(Y),children:n}),ep?(0,b.jsx)(ep,{size:[{from:"s",value:3},{until:"s",value:7}]}):null]}),(0,b.jsxs)("div",{className:es(ee),children:[(0,b.jsx)("div",{className:es(et),children:(0,b.jsx)(U.Z,K({},r({name:"email",label:eo.newsletterI18n.newsletterForm.labelText,variant:ev[v].inputVariant,type:"email",noteText:eo.newsletterI18n.newsletterForm.noteText,isDisabled:!W&&!eN,requiredText:{isSup:!0,long:eb,short:ey},miscStyles:{type:-1,paddingTop:"calc(1rem - 1px)",paddingBottom:"calc(1rem - 1px)",color:eo.color("neutral","-1"),":hover":{color:eo.color("neutral","-1")}}})))}),(0,b.jsx)(p.Z,{onClick:function(){!W||eN||ed?i.apply(void 0,arguments):ed||em(!0)},boxModel:{hp:3,vp:1},isBusy:o,miscStyles:en,isDisabled:!W&&!eN,variant:eo.newsletterStyle[v].buttonVariant,children:W||eN?eo.newsletterI18n.buttons.signUp||t:eo.newsletterI18n.buttons.nonSubscribers})]}),"anonymous"!==y.type||T?null:(0,b.jsxs)("span",{className:es({display:"block",fontWeight:400,marginTop:"1rem",color:eo.color("neutral","-1"),extend:[eo.type(-2,{lines:2.5})]}),children:[eo.newsletterI18n.newsletterForm.termAndConditionText.txt1,(0,b.jsx)(R.Z,{className:es({paddingInlineStart:"0.3rem",paddingInlineEnd:"0.3rem"}),href:eo.newsletterI18n.newsletterForm.termAndConditionText.href||null,children:(0,b.jsx)("span",{className:es({textDecoration:"underline"}),children:eo.newsletterI18n.newsletterForm.termAndConditionText.txt2})}),eo.newsletterI18n.newsletterForm.termAndConditionText.txt3]})]})}})}})}var es=n(24284),eo=n(31099),el=function(e){var t=e.theme,n=e.variant,i=e.miscStyles;return{position:"relative",padding:"2rem",overflow:"hidden",fontFamily:t.fontStacks[t.framedFont],extend:[(0,o.Z)(void 0,n,t.mq,eu,t.color,t)].concat((0,r.Z)(i?(0,l.Z)(i,t.mq,t.type):[]))}};function eu(e,t,n){return{backgroundColor:n("newsletter","".concat(t,"Bg")),color:n("newsletter","".concat(t,"Text"))}}var ec={width:[{from:"s",value:"99%"},{until:"s",value:"98%"}],padding:"2rem",height:"100%"};function em(e){var t=e.buttonText,n=e.contentId,r=e.titleText,o=e.icon,l=e.featureName,u=e.loading,c=e.onSubmit,m=e.onClose,d=e.user,p=e.segmentId,f=e.segmentNumber,g=e.segmentName,y=e.tagNumber,v=e.resourceId,h=e.resourceType,x=e.afterSignUp,w=e.signedUp,N=e.signupNewsletter,j=e.variant,k=e.miscStyles,O=e.displayDialogButton,I=e.origin,T=e.isSubscriber,P=e.subscribersOnly,Z=(0,a.Z)({variant:j,miscStyles:k}),C=Z.theme,D=Z.css,E=(0,i.useState)(w?"ok":null),A=E[0],B=E[1],V=(0,i.useState)(null),R=V[0],F=V[1],M="newsletterRegForm".concat(n||Math.random()),U=r||C.newsletterI18n.texts.defaultTitleText;return(0,b.jsx)(eo.ZP,{children:function(e){var n=e.gaAction,r=e.biAction,i=e.biImpression;return(0,b.jsx)(s.df,{triggerOnce:!0,rootMargin:"10px",children:function(e){var a=e.inView,s=e.ref;return(0,b.jsxs)("div",{ref:s,className:D(el),id:M,"data-test":"newsletter",children:[(0,b.jsx)(ea,{buttonText:t,isSubscriber:T,subscribersOnly:P,featureName:l,headlineText:U,icon:o,loading:u,variant:j,user:d,segmentId:v||y||f||p,resourceType:h,resourceId:v,tagNumber:y,segmentName:g,signupNewsletter:N,inView:a,gaAction:n,biAction:r,biImpression:i,setParentEmailState:function(e){F(e)},setParentState:function(e){B(e),e&&"failed"!==e&&"function"==typeof x&&x()},origin:I}),(0,b.jsx)(es.Z,{appendTo:"".concat(M,"DialogWrapper"),elementToHide:M,isVisible:!!A,onOpen:c,overlayBgColor:C.color("newsletter","".concat(j,"Bg")),containerMiscStyles:ec,render:function(e){var t=e.handleClose;return(0,b.jsx)(S,{biAction:r,biImpression:i,signUpEmail:R,displayDialogButton:O&&["success","exist"].includes(A),variant:j,closeConfirmation:function(){"function"==typeof m&&m(),w||B(null),t()},signUpStatus:A})}}),(0,b.jsx)("div",{id:"".concat(M,"DialogWrapper")})]})}})}})}em.defaultProps={buttonText:null,afterSignUp:null,featureName:"Regular-Newsletter",icon:null,onSubmit:null,onClose:null,miscStyles:null,segmentId:1420800,segmentNumber:null,segmentName:null,signedUp:null,titleText:null,displayDialogButton:!0,isSubscriber:!1,subscribersOnly:!1,origin:null,resourceType:"newsletter",resourceId:null}},44162:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(99276);function i(e){var t,n,i,a=e.email,s=e.register,o=Math.random().toString(36).slice(-8),l=(n=null,i=null,(t=a).substring(0,t.indexOf("@")),[n="guest",i="guest"]),u=(0,r.Z)(l,2),c=u[0],m=u[1];return s({email:a.trim(),password:o,confirmPassword:o,firstName:c.trim(),lastName:m.trim(),mobilePrefix:"",mobileNumber:"",termsChk:"on",restEntryType:"NEWSLETTER_MINI_REG"}).then(function(e){return{status:"success"}}).catch(function(e){var t;return{status:"error",cause:null===(t=e.cause)||void 0===t?void 0:t.msg}})}n(32735)},84866:function(e,t,n){"use strict";var r=n(47946),i=n(59639),a=n(36953),s=n(77509),o=n(19851),l=n(26124),u=n(31737),c=n(32735),m=n(99329),d=n(70231),p=n(74512),f=function(e){(0,s.Z)(c,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,l.Z)(c);if(t){var r=(0,l.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,o.Z)(this,e)});function c(){var e;(0,r.Z)(this,c);for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];return e=n.call.apply(n,[this].concat(i)),(0,u.Z)((0,a.Z)(e),"getRegisterFunction",function(e,t){return function(n){var r=n.email,i=n.password,a=n.confirmPassword,s=n.firstName,o=n.lastName,l=n.mobilePrefix,u=n.mobileNumber,c=n.termsChk,d=n.gRecaptchaResponse,p=n.restEntryType,f=n.readerId,g=n.subsNo,b=n.isEntitlement;return new m.Z({plantCookiesCallback:t}).register({email:r,password:i,confirmPassword:a,firstName:s,lastName:o,mobilePrefix:void 0===l?"":l,mobileNumber:void 0===u?"":u,termsChk:c,gRecaptchaResponse:void 0===d?"":d,restEntryType:p,user:e,readerId:f,subsNo:g,isEntitlement:void 0!==b&&b})}}),e}return(0,i.Z)(c,[{key:"render",value:function(){var e=this;return(0,p.jsx)(d.ZP,{render:function(t){var n=t.user,r=t.plantCookies;return e.props.render({register:e.getRegisterFunction(n,r)})}})}}]),c}(c.Component);f.defaultProps={},t.Z=f},30007:function(e){e.exports={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"NewsletterSignUpMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NewsletterSignupInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newsletterSignup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}]}},30061:function(e){e.exports={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserLogin"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"site"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Site"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userLogin"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPaying"},arguments:[{kind:"Argument",name:{kind:"Name",value:"site"},value:{kind:"Variable",name:{kind:"Name",value:"site"}}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"ssoId"},name:{kind:"Name",value:"_id"},arguments:[],directives:[]}]}}]}}]}}}]);
//# sourceMappingURL=8543-4c4d20874922e77a.js.map