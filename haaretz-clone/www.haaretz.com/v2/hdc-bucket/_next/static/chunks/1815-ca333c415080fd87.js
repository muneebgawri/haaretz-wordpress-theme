"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1815,5733],{5084:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(82155);let a=function(e){let{elements:t,cb:n,threshold:a,rootMargin:o,root:l}=e,[s,i]=r.useState();return r.useEffect(()=>{if(s)if(Array.isArray(t))for(let e of t)e.current&&s.observe(e.current);else t?.current&&s.observe(t.current);else i(new IntersectionObserver(n,{threshold:a,rootMargin:o,root:l}));return()=>s?.disconnect()},[n,t,s,l,o,a]),s}},11206:(e,t,n)=>{n.d(t,{default:()=>k});var r=n(32285),a=n(2619),o=n(67356),l=n(27434),s=n(82155);let i=n(89668).default,c="GAM_session",d="GAM_OutOfPage",u={everyNewSession:0,onceAnHour:1,whenPossible:2,none:3},m={everyNewSession:function(e){let t=!!sessionStorage?.getItem(c);return!t&&sessionStorage&&sessionStorage.setItem(c,"started"),!t},onceAnHour:function(e){let t=`GAM_${e.contentId}`,n=localStorage?.getItem(t),r=null,a=localStorage?.getItem(d),o=null,l=Date.now();if(n)try{r=parseInt(n,10)}catch(e){localStorage&&localStorage.removeItem(t)}if(a)try{o=parseInt(a,10)}catch(e){localStorage&&localStorage.removeItem(d)}return r?l-r>=36e5:!o||l-o>=3e4},whenPossible:h,none:h};function b(e){let t,n,a,o,i,c,d=(0,r.c)(9),{adSlots:u}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],d[0]=t):t=d[0];let[b,h]=s.useState(t);return d[1]!==u?(a=u||[],d[1]=u,d[2]=a):a=d[2],d[3]!==a?(o=[...a].sort(p),d[3]=a,d[4]=o):o=d[4],n=o,d[5]!==n?(i=()=>{h(function(e){let t=[];for(let n of e)m[n.displayFrequency||"none"](n,t)&&t.push(n);return t}(n))},d[5]=n,d[6]=i):i=d[6],(0,l.A)(i,!0),d[7]!==b?(c=b&&b.length>0?b.map(f):null,d[7]=b,d[8]=c):c=d[8],c}function f(e){return(0,a.jsx)(i,{...e},e.contentId)}function p(e,t){let n=e.displayFrequency||"none",r=t.displayFrequency||"none";return u[n]-u[r]}function h(e,t){let n=t?.length>0,r=!0;if(n)r=!1;else{let e=Date.now(),t=localStorage?.getItem(d);if(t)try{let n=parseInt(t,10);r=e-n>2e4}catch(e){console.warn("unable to parse localStorage['GAM_OutOfPage'] to time.")}}return r}function k(e){return(0,a.jsx)(o.Ay,{children:(0,a.jsx)(b,{...e})})}},12935:(e,t,n)=>{n.d(t,{A:()=>r});let r=function(e){return e?/\S+@\S+\.\S+/.test(e)?e.length>40?{valid:!1,text:"Email must contain less than 40 characters"}:{valid:!0,text:"Enter email"}:{valid:!1,text:"Use a valid email format"}:{valid:!1,text:"Enter email"}}},12991:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_ELEMENT:()=>d,_Chip:()=>m,chipBaseStyle:()=>c,default:()=>u});var r=n(2619),a=n(46272),o=n(8593),l=n(82155),s=n(68151);let i={base:{4:"foGVKH",60:"izykGz",76:"cwWSWx",95:"jhKQav",jfaxaL:"gAmOiO","1x":"kbeApl","5v":"jWjrEQ","5x":"eKtERL","3q":"BRobm","3o":"iovjFN","7o":"cUcBkx",az:"cFGWDo",jt:"gcyyum",jm:"fHRBnN",jv:"eGCNgh",jj:"kqnFEK",k4:"dUvWpK",k5:"hRLVFh",td:"wXQPo",t5:"kcobyR",ti:"iaemGh",ub:"bwVBMs",ba:"gVscJz",f6:"kvNqZl","3m":"gkvBph","3t":"ctibpX","3s":"hpBjJb",kh:"eejUxl","5t":"dnvTka","5z":"FwRrA",kr:"bdXHYu","4q":"dREueb","4s":"bTnXNj","4r":"hszzXi",kl:"fxCImo","4u":"hMMnTf","4w":"hXXzlB","4v":"itlHSH",km:"fPuwlT",brsFym:{"1x":"fMYctm"},jOFsBf:{jv:"doopzH",jm:"ghsDHv"},eSaxtD:{se:"iNlVNY"}},liveBlogVariant:{53:"bOyogF",60:"dHkdJT",76:"URsRO","1x":"fozssY",cprHYZ:"csCwQt","5f":"cjZygW","3t":"dECBTy",brsFym:{"1x":"fTldwl",cprHYZ:"bSOWnd"}},isPressed:{cprHYZ:"clwoRa","1x":"hvVLnT",brsFym:{"1x":"ivwdVR"}},icon:{17:"eIaFCs",g2:"BkTRv",h:"eXLpeB",l:"ieovjt",t:"dxsliA"},iconAnimation:{z:"kijnzi"},disabled:{j9:"ddlsXY",lj:"eDssNQ","8x":"fYFPyg"},nonPressable:{brsFym:{"1x":"VtttQ"},eSaxtD:{se:"hgKDpN"},"8x":"gvqjfu","1x":"mOGUM"}},c=i.base,d="button";function u(e){let{ref:t,as:n,kind:a,showIcon:c=!0,isPressed:u=!1,children:m=null,screenReaderText:f,pressableIcons:p={pressed:"check",unpressed:"plus"},inlineStyle:h,styleExtend:k=[],variant:x="base",...g}=e,[y,v]=l.useState(!1),j=l.useRef(u?p.pressed:p.unpressed),A=l.useRef(u);A.current!==u&&(A.current=u,v(!0),j.current=u?p.pressed:p.unpressed);let S={},w="pressable"===a;w&&(S["aria-pressed"]=u);let C=w&&c?(0,r.jsx)(b,{iconRef:j,shouldAnimate:y,setShouldAnimate:v,icons:p}):null;return(0,r.jsx)(n||d,{ref:t,style:h,...g,...S,className:(0,s.A)(i.base,"non-pressable"===a&&i.nonPressable,w&&u&&i.isPressed,"liveBlog"===x&&i.liveBlogVariant,g.disabled&&i.disabled,...k),children:(0,r.jsxs)(r.Fragment,{children:[C,f?(0,r.jsx)(o.Ay,{children:f}):null,m]})})}function m(e){return null}function b(e){let{iconRef:t,shouldAnimate:n,setShouldAnimate:o,icons:s}=e,[c,d]=l.useState(t.current);n&&(t.current=c===s.pressed?s.unpressed:s.pressed);let u=l.useCallback(e=>{setTimeout(()=>{d(t.current)},175)},[t]),m=l.useCallback(e=>{o(!1)},[o]);return(0,r.jsx)(a.A,{icon:c,focusable:!1,styleExtend:[i.icon,n&&i.iconAnimation],onAnimationEnd:m,onAnimationStart:u})}},24710:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2619),a=n(82155),o=n(68151);let l={dialog:{v6:"hKoyFU"},backdrop:{63:"bLIxaN",v6:"eoipIJ",lk:"bEvNbr",s8:"WhAZY",eb:"eAUDaE",ea:"laZGxq"}},s=function(e){let{ref:t,backdropAttrs:n,backdropInlineStyle:s,backdropStyleExtend:i=[],children:c=null,inlineStyle:d,styleExtend:u=[],isOpen:m,labelledBy:b,onOpen:f,onClose:p,onToggle:h,closeOnAllOutsideClicks:k=!1,...x}=e,g=a.useRef(!1),y=a.useRef(null),v=a.useRef(null),j=t??v,A=a.useRef(null),S=a.useCallback(e=>{let t="current"in j&&j.current;t&&!t.contains(e.target)&&t.close()},[j]),w=a.useCallback(e=>{p&&p(e),h&&h(!1)},[h,p]),C=a.useCallback(e=>{let t="current"in j&&j.current;t&&"Escape"===e.key&&t.close()},[j]);return(a.useEffect(()=>{let e,t,n="current"in j&&j.current,r=m&&!g.current;if(n&&r){if(n.show(),e=n.offsetParent,t=k?document.documentElement:e){t.addEventListener("click",S),e?.addEventListener("keydown",C);let n=Array.from(t.querySelectorAll("dialog *"));A.current=t.querySelectorAll(':not(dialog):not([tabindex="-1"])');for(let e=0;e<A.current.length;e++){let t=A.current[e];n.includes(t)||(t._prevTabindex=t.getAttribute("tabindex"),t.setAttribute("tabindex","-1"),t.style.outline="none")}}f&&f(n),h&&h(!0),g.current=!0}return()=>{t?.removeEventListener("click",S),e?.removeEventListener("keydown",C),A?.current?.forEach(e=>{e._prevTabindex?(e.setAttribute("tabindex",e._prevTabindex),e._prevTabindex=null):e.removeAttribute("tabindex"),e.style.outline="null"}),g.current=!1}},[m,S,C,f,h,j,k]),m)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{...n,ref:y,className:(0,o.A)(l.backdrop,...i),style:s}),(0,r.jsx)("dialog",{ref:j,"aria-labelledby":b||void 0,tabIndex:-1,onClose:w,...x,className:(0,o.A)(l.dialog,...u),style:d,children:c})]}):null}},27229:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(32285),a=n(2619);n(82155);let o=n(59050).default;var l=n(82255);function s(e){let t,n,s,c,d=(0,r.c)(10);d[0]!==e?({articleId:t,commentId:n,...s}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s):(t=d[1],n=d[2],s=d[3]);let{replyToCommentId:u,replyToAuthor:m}=(0,l.useCommentsContext)(),{cancelReplyForm:b}=(0,l.useCommentsActionsContext)();return u!==n?null:(d[4]!==t||d[5]!==b||d[6]!==n||d[7]!==s||d[8]!==m?(c=(0,a.jsx)(o,{...s,isReplyForm:!0,articleId:t,cancelReplyForm:b,ref:i,replyTo:m,parentCommentId:n}),d[4]=t,d[5]=b,d[6]=n,d[7]=s,d[8]=m,d[9]=c):c=d[9],c)}function i(e){null!==e&&e.scrollIntoView({behavior:"smooth",block:"center"})}},50384:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(2619),a=n(82390),o=n(81722),l=n(32285),s=n(29049),i=n(94100);let c=function(){let e,t,n,r=(0,l.c)(3);r[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"likeDislikeComment",ts:Date.now().toString()}),r[0]=e):e=r[0];let a=e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheTime:0,retry:!1},r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n={cacheKey:"submitNewVote",url:i.j7,clientOptions:t,searchParams:a,fetchOptions:{method:"GET"}},r[2]=n):n=r[2],(0,s.A)(n)};var d=n(46272),u=n(76873),m=n(82155),b=n(68151),f=n(82586);let p={likeButtons:{4:"foGVKH",76:"eSSHzp",95:"gSBWlu","7o":"cUcBkx","1x":"KqcXP",t5:"gAhwfJ",td:"kZJjgX",ti:"iaemGh",brsFym:{76:"cEuhzY"}},disabled:{j9:"kxoopf",lj:"eDssNQ"},icon:{ba:"fUqtKm"},likeButtonsText:{76:"dvkVMF",ba:"gVscJz",f6:"kvNqZl",bmDBbg:{ba:"hfBlWQ",f6:"MEWJw"},eIHxDx:{ba:"boPXgS",f6:"bnVOLt"}},likeIcon:{fu:"dSvNJo"}},h="VOITED_COMMENTS",k={count:0,comments:[]};function x(e){let{commentId:t,likes:n,dislikes:l}=e,s=null!=n,[i,x]=m.useState((s?n:l)||0),g=(0,u.A)(),{hasAlreadyVoted:y}=(0,f.useReportAbuseContext)(),{setHasAlreadyVoted:v}=(0,f.useReportAbuseActionsContext)(),{mutate:j,isLoading:A}=c();m.useEffect(()=>{JSON.parse((0,a.A)({key:h,storage:"local"})||JSON.stringify(k)).comments.includes(t)&&v(!0)},[t,v]);let S=async()=>{v(!0);let e=JSON.parse((0,a.A)({key:h,storage:"local"})||JSON.stringify(k));e.comments[e.count%20]=t,e.count=e.count+1,(0,o.A)({key:h,value:JSON.stringify(e),storage:"local"}),x(e=>e+1),j({commentId:t,[s?"like":"dislike"]:!0})};return(0,r.jsxs)("button",{className:(0,b.A)(p.likeButtons,y&&p.disabled),disabled:A||y,onClick:()=>{S(),g({feature:"Talkbacks",feature_type:"Content",campaign_details:s?"thumbs up":"thumbs down",action_id:186})},"data-testid":`${s?"like":"dislike"}-btn`,children:[(0,r.jsx)(d.A,{icon:s?"like":"dislike",styleExtend:[p.icon,s&&p.likeIcon]}),(0,r.jsx)("span",{className:(0,b.A)(p.likeButtonsText),children:i})]})}function g(e){return(0,r.jsx)(m.Suspense,{fallback:null,children:(0,r.jsx)(x,{...e})})}},50725:(e,t,n)=>{n.d(t,{A:()=>r});let r=n(62268).A},53158:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(32285),a=n(2619),o=n(38880),l=n(29049),s=n(94100);let i=function(){let e,t,n,a=(0,r.c)(3);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"reportOffensive",invisible:String(!0),ajax:String(!0)}),a[0]=e):e=a[0];let o=e;return a[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheTime:0,retry:!1},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n={cacheKey:"reportAbuse",url:s.j7,clientOptions:t,searchParams:o,fetchOptions:{method:"GET"}},a[2]=n):n=a[2],(0,l.A)(n)};var c=n(82155);n(68151);var d=n(82586);let u={reportAbuseBtn:{km:"cWyozt",kl:"leIGKB",hrWIxl:{km:"fvszOn",kl:"laHQrF"}},disablePointerEvents:{lj:"eDssNQ"}};function m(e){let t,n,l,s,m,b=(0,r.c)(22),{commentId:f,commentsElementId:p}=e,{reportAbuseStatus:h,captchaKey:k,btnState:x}=(0,d.useReportAbuseContext)(),{setReportAbuseStatus:g,setShouldInitCaptcha:y,setBtnState:v}=(0,d.useReportAbuseActionsContext)(),j=c.useRef(!1),A=i(),S="success"===h;b[0]!==f||b[1]!==p||b[2]!==v||b[3]!==g||b[4]!==A?(t=e=>{e?A.mutate({"g-recaptcha-response":e,commentId:f,commentElementId:p},{onSuccess:e=>{let{status:t}=e;"ok"===t?g("success"):g("error")},onError:()=>{g("error")},onSettled:()=>{v("auto")}}):(g("error"),v("auto"))},b[0]=f,b[1]=p,b[2]=v,b[3]=g,b[4]=A,b[5]=t):t=b[5];let w=t;b[6]!==k||b[7]!==w?(n=()=>{k&&!j.current&&(w(k),j.current=!0)},l=[k,w],b[6]=k,b[7]=w,b[8]=n,b[9]=l):(n=b[8],l=b[9]),c.useEffect(n,l),b[10]!==k||b[11]!==w||b[12]!==S||b[13]!==v||b[14]!==y?(s=()=>{S||(v("busy"),k?w(k):y(!0))},b[10]=k,b[11]=w,b[12]=S,b[13]=v,b[14]=y,b[15]=s):s=b[15];let C=s,E=S&&u.disablePointerEvents;return b[16]!==x||b[17]!==S||b[18]!==C||b[19]!==h||b[20]!==E?(m=(0,a.jsx)(o.Ay,{variant:"danger",priority:"tertiary",styleExtend:[u.reportAbuseBtn,E],size:"small",onClick:C,"data-testid":"report-abuse-btn",..."busy"===x?{state:x,busyNotice:"loading..."}:{state:x},children:S?"Report received":"error"===h?"Try again":"Report"}),b[16]=x,b[17]=S,b[18]=C,b[19]=h,b[20]=E,b[21]=m):m=b[21],m}},54092:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(2619),a=n(82155);function o(e){let{children:t}=e,n=a.useCallback(e=>{null!==e&&e.scrollIntoView({behavior:"auto",block:"center"})},[]);return(0,r.jsx)("div",{ref:n,children:t})}},56373:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(32285),a=n(2619),o=n(73553);n(82155);var l=n(68151),s=n(82586);let i={recaptcha:{95:"fcXWHl",ef:"fXzCvR",g7:"cyerGB"},showRecaptcha:{95:"gSBWlu"}},c=(0,o.default)(()=>n.e(9506).then(n.bind(n,39506)).then(e=>e.default),{loadableGenerated:{webpack:()=>[39506]},ssr:!1});function d(){let e,t,n,o,d=(0,r.c)(13),{reportAbuseStatus:u,shouldInitCaptcha:m}=(0,s.useReportAbuseContext)(),{setReportAbuseStatus:b,setCaptchaKey:f,setShouldInitCaptcha:p,setBtnState:h}=(0,s.useReportAbuseActionsContext)();d[0]!==f?(e=e=>{f(e)},d[0]=f,d[1]=e):e=d[1];let k=e;d[2]!==h||d[3]!==b||d[4]!==p?(t=()=>{b("error"),p(!1),h("auto")},d[2]=h,d[3]=b,d[4]=p,d[5]=t):t=d[5];let x=t;d[6]!==m?(n=e=>{null!==e&&m&&e.execute()},d[6]=m,d[7]=n):n=d[7];let g=n;if(!m)return null;let y="success"===u&&i.showRecaptcha;return d[8]!==x||d[9]!==k||d[10]!==g||d[11]!==y?(o=(0,a.jsx)(c,{className:(0,l.A)(i.recaptcha,y),sitekey:"6LcC3usUAAAAAByOPVWv3pn9KXAwstot5vYjk1Gb",onChange:k,onErrored:x,size:"invisible",forwardedRef:g,badge:"inline"}),d[8]=x,d[9]=k,d[10]=g,d[11]=y,d[12]=o):o=d[12],o}},57287:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(2619),a=n(46272),o=n(88114),l=n(82155),s=n(68151);let i={authorDecorationWrapper:{g2:"gceMZP",g1:"hrNAzC",u4:"gvuOMx","1x":"KqcXP"},goldStar:{76:"bKhMHs"},silverStar:{76:"iMssib"},starPopover:{i6:"bdLhrK",kr:"dmKgnC",ko:"cVJMrm",kh:"dPFrWx",kn:"JxWnH",ba:"fyHdVr",f6:"iKTruj",XBEFd:{ba:"cJtokI",f6:"jzXrUE"},eIHxDx:{ba:"jbDMjY",f6:"kzePcG"},LoNYL:{i6:"keXcGR"}},authorRate:{bu:"iLdtFu"}};function c(e){let{authorRate:t}=e,n=l.useId(),c=l.useRef(null);return!t||t<60?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"data-testid":"rating-star",ref:c,className:(0,s.A)(i.authorDecorationWrapper),"aria-labelledby":n,children:(0,r.jsx)(a.A,{icon:"star",styleExtend:[t>80?i.goldStar:i.silverStar]})}),(0,r.jsxs)(o.default,{refersToRef:c,kind:"tooltip",styleExtend:[i.starPopover],placement:"top-start",offsetValue:{crossAxis:"-1.25rem"},"data-testid":"rating-star-tooltip",keepInView:!0,children:[(0,r.jsxs)("span",{className:(0,s.A)(i.authorRate),id:n,children:["Commentator rating"," ",t,"."," "]}),(0,r.jsx)(r.Fragment,{children:"Rating is given to Haaretz digital subscribers and reflects their comments feeback. To get rated, select a nickname"})]})]})}},58637:(e,t,n)=>{n.d(t,{default:()=>f});var r=n(32285),a=n(2619),o=n(38880),l=n(29049),s=n(94100);let i=function(){let e,t,n,a=(0,r.c)(3);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"reject"}),a[0]=e):e=a[0];let o=e;return a[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheTime:0,retry:!1},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n={cacheKey:"rejectComment",url:s.j7,clientOptions:t,searchParams:o,fetchOptions:{method:"GET"}},a[2]=n):n=a[2],(0,l.A)(n)},c=function(){let e,t,n,a=(0,r.c)(3);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"editorsPick"}),a[0]=e):e=a[0];let o=e;return a[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheTime:0,retry:!1},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n={cacheKey:"selectEditorsPick",url:s.j7,clientOptions:t,searchParams:o,fetchOptions:{method:"GET"}},a[2]=n):n=a[2],(0,l.A)(n)};var d=n(82155);n(68151);let u={btn:{km:"cWyozt",kl:"leIGKB"}},m=e=>{let{children:t,...n}=e;return(0,a.jsx)(o.Ay,{priority:"tertiary",styleExtend:[u.btn],...n,children:t})},b={success:"בוצע",error:"משהו השתבש. נסו שנית"};function f(e){let t,n,o,l,s=(0,r.c)(16),{commentId:u}=e,f=i(),p=c(),[h,k]=d.useState(null),[x,g]=d.useState(null);s[0]!==u||s[1]!==f?(t=()=>{g(null),f.mutate({commentId:u},{onSuccess:e=>{let{status:t}=e;"ok"===t?g("success"):g("error")},onError:()=>{g("error")},onSettled:()=>k(u)})},s[0]=u,s[1]=f,s[2]=t):t=s[2];let y=t;s[3]!==u||s[4]!==p?(n=()=>{g(null),p.mutate({commentId:u},{onSuccess:e=>{let{status:t}=e;"ok"===t?g("success"):g("error")},onError:()=>{g("error")},onSettled:()=>k(u)})},s[3]=u,s[4]=p,s[5]=n):n=s[5];let v=n;if(s[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>g(null),s[6]=o):o=s[6],s[7]!==u||s[8]!==v||s[9]!==f.isLoading||s[10]!==y||s[11]!==p.isLoading||s[12]!==h||s[13]!==x){let e;s[15]===Symbol.for("react.memo_cache_sentinel")?(e=()=>g(null),s[15]=e):e=s[15],l=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{onClick:y,onBlur:o,variant:"danger",...f.isLoading?{state:"busy",busyNotice:"טוען..."}:{state:"auto"},children:"Reject"}),(0,a.jsx)(m,{onClick:v,onBlur:e,variant:"success",...p.isLoading?{state:"busy",busyNotice:"טוען..."}:{state:"auto"},children:"Editor's pick"}),u===h&&x?b[x]:null]}),s[7]=u,s[8]=v,s[9]=f.isLoading,s[10]=y,s[11]=p.isLoading,s[12]=h,s[13]=x,s[14]=l}else l=s[14];return l}},59050:(e,t,n)=>{n.r(t),n.d(t,{default:()=>et});var r=n(2619),a=n(12108),o=n(38880),l=n(87503),s=n(32285),i=n(78684),c=n(94100);let d=new URLSearchParams({action:"getNickname"}),u=function(e){let t,n=(0,s.c)(2),{enabled:r}=e;return n[0]!==r?(t={cacheKey:"getUserNickname",url:c.Iq,searchParams:d,clientOptions:{useErrorBoundary:!1,cacheTime:1e4,staleTime:1e4,retry:!1,enabled:r}},n[0]=r,n[1]=t):t=n[1],(0,i.A)(t)};var m=n(29049);let b=function(){let e,t,n,r=(0,s.c)(3);r[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"setNickname",ts:Date.now().toString()}),r[0]=e):e=r[0];let a=e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheTime:0,retry:!1},r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n={cacheKey:"setUserNickname",url:c.Iq,clientOptions:t,searchParams:a,fetchOptions:{method:"GET"}},r[2]=n):n=r[2],(0,m.A)(n)},f=function(){let e,t,n=(0,s.c)(2);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"createComment",ts:Date.now().toString()}),n[0]=e):e=n[0];let r=e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheKey:"submitNewVote",url:c.j7,searchParams:r,clientOptions:{cacheTime:0,retry:!1}},n[1]=t):t=n[1],(0,m.A)(t)};var p=n(58714),h=n(58368),k=n(46272),x=n(47398),g=n(76873),y=n(27434),v=n(82155),j=n(68151),A=n(82255),S=n(50725);let w={commentFieldWrapper:{60:"izykGz",95:"gSBWlu","5v":"fuRihO","5x":"hnIqRG","3q":"jMcElf","3o":"bpwkrd","8x":"jsvbrX","9t":"iMkoWi",d4:"fndYWH",g7:"cUXNmd","3m":"czmYtI","3t":"ctibpX","3s":"hpBjJb",kh:"forjOp","4q":"censJO","4s":"bTnXNj","4r":"hszzXi",kl:"bWNKbL","4u":"buqKDN","4w":"hXXzlB","4v":"itlHSH",km:"ddynka","5t":"SopRk","5z":"FwRrA",kr:"eaiqgL",ba:"fyHdVr",f6:"iKTruj",durFye:{d4:"gYmMAJ",ba:"hauAvq",f6:"fKdRdV"},eIHxDx:{ba:"jbDMjY",f6:"kzePcG"},brsFym:{"5t":"gRtJjG","3m":"dtEBUS","4u":"chggsG","4q":"ejMpPT"},fKfEFl:{"5t":"fJIafG","3m":"cwmHJS","4u":"eMpJXE","4q":"gqrvKb"}},bold:{bu:"iLdtFu"},contentEditableBorder:{iDfHNl:"bnuimz"},contentEditableNoBorder:{iDfHNl:"fPnPph"},toolbarWrapper:{95:"gSBWlu",ef:"kJzccJ",lk:"cjScYX",dolCMd:{"8h":"fqXcHQ",lk:"dyMCpl",s8:"jtnuen",d4:"jzUcbf","1x":"fvJbZx",ue:"ijlwqc"}},toolbarButtons:{95:"gSBWlu","7o":"kHZKeb",g7:"gGEWPV",g1:"kcwYCF"},toolbarBtn:{d4:"iUlwEC",ue:"kVcChr","1x":"fozssY",brsFym:{"1x":"fTldwl"}},toggled:{76:"kAWnRk","1x":"kxSxvm",brsFym:{"1x":"QklzP"}},italicBtn:{bf:"foKnQA"},commentField:{jv:"eGCNgh",ko:"cVJMrm",kh:"dPFrWx",kn:"JxWnH"},commentFieldDisabled:{lj:"eDssNQ"},initialCursor:{"8x":"epiWQZ"},commentFieldDescritpion:{76:"dvkVMF",g7:"iqhvfj",ba:"gVscJz",f6:"kvNqZl",XBEFd:{ba:"ketQdR",f6:"dZGrCl"},bmDBbg:{ba:"hfBlWQ",f6:"MEWJw"},eIHxDx:{ba:"boPXgS",f6:"bnVOLt"}},descriptionTextLink:{76:"gjYftY"},borderTransition:{td:"fXEOVo",t5:"gAhwfJ",ti:"iaemGh"},errorBorderColor:{"5t":"gLNsSQ","3m":"gBdMoT","4u":"jEYkjJ","4q":"ceSAPL",brsFym:{"5t":"cIbPwg","3m":"cvvSOu","4u":"eaREGZ","4q":"cbRejz"}},contentEditableWrapper:{k5:"llUCyD",g7:"fClzDx"}};function C(e){let{ref:t,errorCommentField:n,setErrorCommentField:a,dialogType:o,isLoading:l}=e,[s,i]=v.useState(!1),[c,d]=v.useState(!1),[u,m]=v.useState(!1),b=v.useId(),f=v.useId(),p=v.useId(),x=v.useId();if("function"==typeof t)throw TypeError("You cannot pass a ref callback");let g=()=>{d(document.queryCommandState("bold")),m(document.queryCommandState("italic"))},y=(0,r.jsx)("span",{className:(0,j.A)(s&&w.bold),children:"Comment"}),A=()=>{let e=t?.current?.textContent;e?e.length>1e3?a("Comment max length is 1000 chars"):a(null):a("Comment is required")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,j.A)(w.commentFieldWrapper,s&&w.initialCursor,!!n&&w.errorBorderColor,w.borderTransition,l&&w.commentFieldDisabled),onClick:()=>{t?.current&&t.current.focus(),i(!0)},onFocus:()=>{i(!0)},onBlur:e=>{let t=e.relatedTarget?.id===b,n=e.relatedTarget?.id===f;t||n||i(!1)},children:[(0,r.jsx)("div",{className:(0,j.A)(w.toolbarWrapper,s?w.contentEditableBorder:w.contentEditableNoBorder),id:p,children:s?(0,r.jsxs)(r.Fragment,{children:[y,(0,r.jsxs)("div",{className:(0,j.A)(w.toolbarButtons),children:[(0,r.jsx)("button",{className:(0,j.A)(w.italicBtn,w.toolbarBtn,u&&w.toggled),onClick:()=>{document.execCommand("italic"),m(document.queryCommandState("italic"))},id:b,type:"button",children:(0,r.jsx)(k.A,{icon:"italics",id:b})}),(0,r.jsx)("button",{className:(0,j.A)(w.toolbarBtn,c&&w.toggled),onClick:()=>{document.execCommand("bold"),d(document.queryCommandState("bold"))},id:f,type:"button",children:(0,r.jsx)(k.A,{icon:"bold",id:f})})]})]}):y}),(0,r.jsx)("div",{className:(0,j.A)(w.contentEditableWrapper),children:(0,r.jsx)("div",{className:(0,j.A)(w.commentField,!s&&w.commentFieldDisabled),contentEditable:!0,ref:t,onKeyDown:e=>{let n=t?.current?.textContent;if(n){let t="Backspace"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key;n.length>=1e3&&t&&e.preventDefault()}},onInput:A,onBlur:A,onClick:g,onKeyUp:g,"aria-describedby":x,"data-testid":"comment-input",dangerouslySetInnerHTML:"success"===o?{__html:""}:void 0})})]}),n?(0,r.jsx)(h.A,{id:x,isInvalid:!!n,children:n}):(0,r.jsxs)("div",{className:(0,j.A)(w.commentFieldDescritpion),children:["By adding a comment, I agree to this site's ",(0,r.jsx)(S.A,{href:"https://www.haaretz.com/misc/terms-and-conditions",target:"_blank",rel:"noreferrer",styleExtend:[w.descriptionTextLink],children:"terms and conditions"})," ",""]})]})}var E=n(46975);let N={base:{20:"jCHMEY",v6:"gHWvIB","5v":"jIvMrU","5x":"hmCuSu","3q":"fIrBSQ","3o":"ElkcK",k4:"dUvWpK",k5:"hRLVFh",az:"cFGWDo",ci:"ghFsRA",ce:"SbJud",cu:"heRyJD",cq:"iGJOTc",ue:"cRUUAa",kr:"bcOEln",LoNYL:{kr:"wjdKA"}},gradient:{4:"foGVKH",20:"dmLzGe",95:"gSBWlu","9t":"iMkoWi",ly:"bNzOWQ",kr:"ABldN",kh:"hiXfKW",km:"dwXqlO",kl:"kwGEcy",LoNYL:{ly:"kvoiXX",kr:"itYbrS",kh:"bZIzpA",km:"bWKydD",kl:"cNGqVt"},XBEFd:{kl:"dobkyZ"},durFye:{kl:"ddpkGG"}},content:{ba:"kMkSmA",f6:"QGZZw",cnmStr:{pr:"cFnwDe",i6:"ivqvDj"},XBEFd:{ba:"ePNYGP",f6:"jyxlHr"},bmDBbg:{ba:"ggBTYA",f6:"bRRjVe"},eIHxDx:{ba:"fiynbU",f6:"jsKQbE"}},header:{76:"URsRO",bu:"huiurs",fu:"idMVCD"},button:{ba:"iKjpVA",f6:"cVaJzg",ckijge:{ba:"jYtmTy",f6:"kRMuA_D"},durFye:{kr:"xjlOZ",kh:"hvmGKx",km:"ldQfTt",kl:"Qkajm"},eIHxDx:{ba:"kNnzPI",f6:"dkNqmP"}},buttons:{4:"foGVKH",95:"gSBWlu","9t":"iMkoWi",ly:"cdoQpa",LoNYL:{4:"fNaBoZ",6:"hBtHNd",ly:"fYJrsj"}},footer:{ba:"iKjpVA",f6:"cVaJzg",ckijge:{ba:"cNZXMP",f6:"jRbxuj"}},footerLink:{s1:"dvUMks"}};function B(e){let t,n=(0,s.c)(8),{paywallButtonText:l,paywallHeader:i,paywallRichText:c}=e,d=(0,g.A)("action"),u=(0,a.Ay)("cookieValue");if(n[0]!==d||n[1]!==l||n[2]!==i||n[3]!==c||n[4]!==u.isLoggedIn){let e;n[6]!==d?(e=()=>{d({action_id:3,feature_type:"Marketing",feature:"Talkbacks",campaign_name:"Subs join faster",campaign_details:"SUBSCRIBE"})},n[6]=d,n[7]=e):e=n[7],t=(0,r.jsx)("div",{className:(0,j.A)(N.base),"data-testid":"comments-paywall",children:(0,r.jsxs)("div",{className:(0,j.A)(N.gradient),children:[(0,r.jsxs)("div",{className:(0,j.A)(N.content),children:[(0,r.jsx)("p",{className:(0,j.A)(N.header),children:i}),(0,r.jsx)("div",{children:c})]}),(0,r.jsxs)("div",{className:(0,j.A)(N.buttons),children:[(0,r.jsx)(o.Ay,{as:E.A,href:"https://promotion.haaretz.com/offers?htm_source=site&htm_campaign=talkbacks&htm_medium=button&htm_content=subs_join_faster&htm_campaign_type=purchase",variant:"sales",styleExtend:[N.button],onClick:e,children:l}),u.isLoggedIn?null:(0,r.jsxs)("p",{className:(0,j.A)(N.footer),children:["Already signed up?"," ",(0,r.jsx)(S.A,{styleExtend:[N.footerLink],href:"https://login.haaretz.com/?htm_source=site&htm_campaign=talkbacks&htm_medium=button&htm_content=subs_join_faster&htm_campaign_type=purchase",onClick:()=>{d({action_id:51,feature_type:"Marketing",feature:"Talkbacks",campaign_name:"Subs join faster",campaign_details:"LOG IN"})},children:"Log in"})]})]})]})}),n[0]=d,n[1]=l,n[2]=i,n[3]=c,n[4]=u.isLoggedIn,n[5]=t}else t=n[5];return t}var R=n(48335),I=n(24710);let W={base:{4:"foGVKH",95:"gSBWlu",i9:"dvrdze",ko:"eeREmo",kn:"hRjOno",g7:"fClzDx",lk:"cjScYX","1x":"fozssY","9t":"iMkoWi",ef:"IVbXa","5v":"ikwGEE","5x":"eIegft","3q":"krSsWC","3o":"nvNAk","3s":"oTbqa","4r":"jbnoSl","4v":"bwlCpB","5z":"jAobFs",eIHxDx:{i9:"jQqDYI"}},closeBtn:{lk:"bEvNbr",s8:"dNtEOi",ea:"kUYKuW"}};function F(e){let{children:t,dialogType:n,setDialogType:a,setErrorNameField:o,isReplyForm:l,cancelReplyForm:s,styleExtend:i=[]}=e;return v.useEffect(()=>()=>{o(null)},[o]),(0,r.jsxs)(I.A,{styleExtend:[W.base,...i],isOpen:"none"!==n,children:[(0,r.jsx)(R.Ay,{onClick:()=>{l&&s&&s(),a("none")},styleExtend:[W.closeBtn],children:(0,r.jsx)(k.A,{icon:"close"})}),t]})}let D={errorStageWrapper:{4:"UXrF",ef:"IVbXa",kr:"jtxNXy",kh:"izetJs",ue:"cRUUAa"},errorTextWrapper:{95:"gSBWlu","9t":"iMkoWi",fu:"ihzQYw"},bold:{bu:"iLdtFu"}},T={generic:{text:"Something went wrong an your comment was not submitted to our site",boldText:"Try again?"},used:{text:"The nickname is already in use",boldText:"Please pick a different nickname"}};function q(e){let{type:t="generic",sharedWrapperProps:n}=e;return(0,r.jsxs)(F,{...n,styleExtend:[D.errorStageWrapper],children:[(0,r.jsxs)("div",{className:(0,j.A)(D.errorTextWrapper),children:[T[t].text,(0,r.jsx)("span",{className:(0,j.A)(D.bold),children:T[t].boldText})]}),(0,r.jsx)(o.Ay,{onClick:()=>n.setDialogType("none"),children:"חזרה"})]})}var P=n(83449);let _={paywallButtonsWrapper:{6:"cMRPvD",g7:"crUZPJ"}},z="I want a nickname",M=`https://promotion.${p.OI}/offers?htm_source=site&htm_medium=Talkbacks&htm_campaign=Nickname_Promotion&htm_content=${z}`;function L(e){let{sharedWrapperProps:t}=e,n=(0,g.A)(),a=v.useRef(null),l={feature:"Talkbacks",feature_type:"Marketing",campaign_name:"Subs join faster",campaign_details:z};return(0,P.A)({elementRef:a,biData:l}),(0,r.jsxs)(F,{...t,children:["Subscribers can pick a permanent nickname, get comment rating and enjoy automatic approval",(0,r.jsxs)("div",{className:(0,j.A)(_.paywallButtonsWrapper),ref:a,children:[(0,r.jsx)(o.Ay,{variant:"sales",as:"a",href:M,onClick:()=>n({...l,action_id:3}),children:z}),(0,r.jsx)(o.Ay,{priority:"tertiary",onClick:()=>t.setDialogType("none"),children:"No thanks"})]})]})}let X=function(){let e,t,n,r=(0,s.c)(3);r[0]===Symbol.for("react.memo_cache_sentinel")?(e=new URLSearchParams({action:"setAuthorEmail",ts:Date.now().toString()}),r[0]=e):e=r[0];let a=e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(t={cacheTime:0,retry:!1},r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n={cacheKey:"submitCommentNotificationEmail",url:c.j7,clientOptions:t,searchParams:a,fetchOptions:{method:"GET"}},r[2]=n):n=r[2],(0,m.A)(n)};var O=n(98501),V=n(91923),H=n(12935);let G={field:{d4:"iIftcP",ue:"cRUUAa"},fullWidthColumn:{ci:"DIEXk"}},K=function(e){let{externalState:t,styleExtend:n=[],inlineStyle:a,...o}=e,[l,s]=v.useState("default"),i=t?.stateProp?t.stateProp:l,c=t?.setStateProp?t.setStateProp:s,d=v.useRef(null),u=d.current?.value||"",m=t?.descriptionState||(0,H.A)(u).text;return(0,r.jsx)(V.Ay,{autoFocus:!0,...o,name:o.name||"email","data-testid":"email-field",required:!0,maxLength:40,description:m,isInvalid:"default"!==i,label:"Email",placeholder:"you@example.com",type:"email",pattern:"\\S+@\\S+\\.\\S+",onInput:()=>{"default"!==i&&(c("default"),t?.setDescriptionProp&&t.setDescriptionProp(""))},styleExtend:[G.field,G.fullWidthColumn,...n],inlineStyle:a,onInvalid:e=>{e.preventDefault(),c(e.currentTarget.value?"invalid":"empty")},ref:d})},U={successTextWrapper:{fu:"biWxPv",XBEFd:{ba:"qSgdC",f6:"kqRsfx"},durFye:{ba:"hauAvq",f6:"fKdRdV"}},successTextBold:{bu:"iLdtFu"},successTextSecondary:{95:"kQBRAp"},displayByMq:{95:"kQBRAp",hA_Dhhn:{95:"jgIPcW"}},emailField:{fu:"bsQBeo",eIHxDx:{g7:"iOmIEk"}},successStageWrapper:{4:"UXrF",ko:"ftIldC",kn:"iDuqPI",ef:"fPWmiY",kr:"iwcTBf",kh:"fZuMrP",bmDBbg:{ko:"ejNyZf",kn:"kPeFwe",kr:"jJeXvQ"},eIHxDx:{ko:"dCZCBs",kn:"hRyBHl",kr:"hzOZCC",kh:"cQLoso"}},fomoWrapper:{4:"foGVKH",60:"izykGz",95:"gSBWlu","9t":"iMkoWi",ue:"cRUUAa",ly:"eSylHt","7o":"hmmyz",bu:"iLdtFu",g7:"fClzDx",kr:"cFjarU",kh:"eayRfw",kn:"iDuqPI",ko:"ftIldC","5t":"kNgFNh","5z":"FwRrA",hA_Dhhn:{kr:"jRdMfe",g7:"hMPWkA","9t":"kJFaOc",ly:"lkfzoq","7o":"irAofm",km:"kRjzAS",kl:"bjZHdY"},fQdabW:{ba:"dwCpSA",f6:"hhATyG"},euIAat:{ba:"bQxKKQ",f6:"gkALtw"},bmDBbg:{ba:"gPowFU",f6:"eaJJqD"},eIHxDx:{ba:"jbDMjY",f6:"kzePcG"}},fomoText:{ub:"bwVBMs"},fomoButton:{52:"gwsGKP","5z":"jAobFs","5e":"dQbyJV","3s":"oTbqa",fQdabW:{ba:"dwCpSA",f6:"hhATyG",kr:"laIchj",kh:"gRSDhE"},fuoJPL:{ba:"jDDXUz",f6:"djwrLm"},eIHxDx:{ba:"iswsIN",f6:"lbqvfo"}}},J="Keep me posted";function Y(e){let{commentId:t,setCommentId:n,userMail:a,isReplyForm:l,cancelReplyForm:s,sharedWrapperProps:i}=e,[c,d]=v.useState(""),[u,m]=v.useState("default"),b=X(),f=v.useRef(null),p=(0,g.A)(),h={feature:"Talkbacks",feature_type:"Content",campaign_name:"new comment alert",campaign_details:J};(0,P.A)({elementRef:f,biData:h});let k=b.isLoading?{state:"busy",busyNotice:"Waiting for response"}:{state:"auto"},x=()=>{d("Something went wrong, please try again later"),m("invalid")};return(0,r.jsxs)(F,{...i,styleExtend:[U.successStageWrapper],cancelReplyForm:s,isReplyForm:l,children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=e.currentTarget.elements.namedItem("email");p({...h,action_id:173}),r&&t&&b.mutate({authorEmail:r.value,commentId:t},{onSuccess:e=>{let{status:t}=e;"ok"===t?(i.setDialogType("none"),d(""),m("default"),n(null),l&&s&&s()):x()},onError:()=>{x()}})},ref:f,children:[(0,r.jsxs)("div",{className:(0,j.A)(U.successTextWrapper),children:[(0,r.jsx)("span",{className:(0,j.A)(U.successTextBold),children:"Thank you!"}),(0,r.jsx)("span",{className:(0,j.A)(U.successTextSecondary),children:"Your comment was successfully submitted and will be published in accordance with site policy. If you would like to be notified when your comment is published, please fill in your email address in the form below."}),(0,r.jsx)("span",{className:(0,j.A)(U.displayByMq),children:""})]}),(0,r.jsx)(K,{styleExtend:[U.emailField],externalState:{descriptionState:c,stateProp:u,setStateProp:m,setDescriptionProp:d},defaultValue:a,required:!0}),(0,r.jsx)(o.Ay,{priority:"secondary",type:"submit",...k,children:J})]}),(0,r.jsx)(O.A,{text:"Want to continue enjoying priority in comments?",buttonText:"Renew subscription",wrapperStyleExtend:[U.fomoWrapper],textStyleExtend:[U.fomoText],buttonStyleExtend:[U.fomoButton],biData:{feature:"New comment alert",feature_type:"Marketing",campaign_name:"fomo",campaign_details:"new comment"}})]})}let Q={base:{95:"gSBWlu",lk:"cjScYX","9t":"iMkoWi","3m":"jDGBcE","3t":"ctibpX","3s":"hpBjJb",kh:"eejUxl"},baseWithPaywall:{52:"gwsGKP",ci:"ghFsRA",ce:"SbJud",cu:"heRyJD",cq:"iGJOTc","5z":"jAobFs","5e":"dQbyJV","3s":"oTbqa"},nameFieldWrapper:{4:"foGVKH",95:"kbCXHY",d1:"bGvxRt"},nameFieldInput:{eIHxDx:{ba:"jbDMjY",f6:"kzePcG"}},nameFieldLabel:{eIHxDx:{VsIBZ:"gynWIa"}},nameDescWrapper:{95:"gSBWlu",ef:"kJzccJ"},nicknameBtn:{76:"IYzP","1x":"KqcXP",pr:"hgpJrQ",g2:"euSzUE",bu:"iLdtFu",i6:"hJXIFT",ba:"gVscJz",f6:"bugLZu",bmDBbg:{ba:"cEKNZk",f6:"jemZuk"},eIHxDx:{ba:"hyhpVP",f6:"loLSha"},durFye:{i6:"efYJdA"},brsFym:{76:"lhhlki"}},buttonsWrapper:{95:"gSBWlu",g7:"EKhXX",fu:"ihzQYw","7o":"haEjPJ",cMBHap:{g7:"bMNJXq",fu:"jnlcSR"}},removeBorder:{"3s":"oTbqa"},hide:{95:"fcXWHl"},chipWrapper:{4:"drPgFJ",95:"gSBWlu","7o":"haEjPJ",bu:"iLdtFu"},removeNameChip:{kl:"cfEHVR",ue:"efDQIp",brsFym:{"1x":"gjDbxt"},eSaxtD:{se:"gpBrgu"}},removeNameBtn:{4:"foGVKH",76:"kAWnRk",95:"gSBWlu",bIphqo:"eUirwo","1x":"bbCFPw","5v":"ddLma_D","5x":"eCnQMN","3q":"hmXxjN","3o":"jQGwbO",ba:"fUqtKm",d4:"kAAWGT",ef:"IVbXa",g2:"euSzUE",pr:"hgpJrQ",t5:"gAhwfJ",td:"iRietU",ti:"iaemGh",g1:"gVCPFb",fKfEFl:{"1x":"bnLXlM",jt:"larHMv"},brsFym:{"1x":"jZiiTn"},eSaxtD:{se:"iNlVNY"}},fadeOut:{j9:"UXrzu"},transition:{td:"bEeIno",t5:"GvmtF",ti:"iaemGh"},commentsFormWrapper:{lk:"cjScYX"},commentsFormWithPaywall:{95:"kbCXHY",d1:"eDqoYN",d2:"eLklVt"},quoteVariant:{ci:"ghFsRA",ce:"gAMLgY",cu:"hIOKJM"}},Z="Something went wrong, please try again later",$={setNicknameBtn:"Remember nickname"};function ee(e){let{ref:t,articleId:n,isReplyForm:s=!1,cancelReplyForm:i,replyTo:c,parentCommentId:d,pageType:m,...S}=e,[w,E]=v.useState(!1),[N,R]=v.useState(null),[I,W]=v.useState(null),F=v.useRef(null),D=v.useRef(null),T=v.useId(),P=b(),_=(0,a.Ay)("cookieValue"),[z,M]=v.useState("none"),[X,O]=v.useState(null),V=f(),[H,G]=v.useState(null),[K,U]=v.useState(!1),J=(0,g.A)(),ee="hdc"===p._P&&"paying"!==_.userType,[et,en]=v.useState(!1),[er,ea]=v.useState(!1),{isInView:eo}=(0,A.useCommentsContext)(),{status:el,data:es}=u({enabled:eo&&"paying"===_.userType}),ei=es?.nickname;(0,y.A)(()=>{ei&&G(ei),E(!0)},"success"===el&&!!ei);let ec=e=>{E(!0),R(null);let t=e?.current?.value||H;t?t.length>20&&(R("Name max length is 20 chars"),E(!1)):(R("Enter display name for comment"),E(!1))},ed={setErrorNameField:R,setDialogType:M,dialogType:z},eu={paywall:(0,r.jsx)(L,{sharedWrapperProps:ed}),success:(0,r.jsx)(Y,{commentId:X,setCommentId:O,userMail:_.userMail||"",cancelReplyForm:i,isReplyForm:s,sharedWrapperProps:ed}),error:(0,r.jsx)(q,{sharedWrapperProps:ed}),used:(0,r.jsx)(q,{sharedWrapperProps:ed,type:"used"})};return(0,r.jsxs)("div",{className:(0,j.A)(Q.commentsFormWrapper,ee&&Q.commentsFormWithPaywall,("QuotesArticle"===m||"MidrugArticle"===m)&&Q.quoteVariant),children:[ee?(0,r.jsx)(B,{...S}):null,(0,r.jsxs)("form",{className:(0,j.A)(Q.base,ee&&Q.baseWithPaywall,"none"!==z&&Q.hide,s&&Q.removeBorder),onSubmit:ee?e=>e.preventDefault():e=>{if(e.preventDefault(),"none"===z){ec(D);let e=D?.current?.value||H,t=F?.current?.innerHTML;if(t||W("Comment is required"),w&&e&&!I&&t){let r=e.trim(),a=t.trim();J({feature:"Talkbacks",feature_type:"Content",campaign_name:"add comment",action_id:1}),V.mutate({articleId:n,authorName:r,text:a,parentCommentId:d,replyTo:c},{onSuccess:e=>{let{status:t,errorCode:n,commentId:r}=e;"ok"===t&&r?(M("success"),O(r)):"303"===n?M("used"):M("error")},onError:()=>{M("error")}})}}},ref:t,"data-testid":"comment-form",children:[H?(0,r.jsxs)("span",{className:(0,j.A)(Q.chipWrapper,Q.removeNameChip,Q.transition,er&&Q.fadeOut),onTransitionEnd:e=>{"opacity"===e.propertyName&&er&&(ea(!1),G(null))},children:["Nickname: ",(0,r.jsxs)(l.Ay,{as:"span","data-testid":"remove-name-chip",children:[H,(0,r.jsx)("button",{className:(0,j.A)(Q.removeNameBtn),type:"button",onClick:()=>void(J({feature:"Talkbacks",feature_type:"Content",campaign_name:"remove nickname",campaign_details:"ביטול כינוי",action_id:169}),P.mutate({nickname:""},{onSuccess:async e=>{let{status:t}=e;"ok"===t?(M("none"),ea(!0)):M("error")},onError:()=>{M("error")}})),"data-testid":"remove-nickname-btn",children:(0,r.jsx)(k.A,{icon:"close"})})]})]}):(0,r.jsxs)(x.TextFieldWrapper,{isInvalid:!!N,styleExtend:[Q.nameFieldWrapper,Q.transition,et&&Q.fadeOut],onTransitionEnd:e=>{"opacity"===e.propertyName&&D?.current?.value&&(en(!1),G(D?.current?.value))},children:[(0,r.jsx)(x.TextFieldInput,{label:"Display Name",inputStyleExtend:[Q.nameFieldInput],labelStyleExtend:[Q.nameFieldLabel],name:"name",type:"text",isInvalid:!!N,onChange:()=>ec(D),maxLength:20,onBlur:()=>ec(D),"aria-describedby":T,"aria-disabled":ee?"true":void 0,ref:D,state:H||V.isLoading||ee?"disabled":"default",defaultValue:H||"",required:!0,"data-testid":"name-input"},H),(0,r.jsx)("button",{className:(0,j.A)(Q.nicknameBtn),type:"button",onClick:()=>{if(ec(D),"paying"===_.userType){let e=D?.current?.value;w&&e&&(U(!0),P.mutate({nickname:e},{onSuccess:async e=>{let{status:t}=e;"ok"===t?(M("none"),en(!0)):"exist"===t?R("The nickname is already in use"):R(Z)},onError:()=>{R(Z)},onSettled:()=>{U(!1)}}))}else M("paywall");J({feature:"Talkbacks",feature_type:"Content",campaign_name:"Nickname link",campaign_details:$.setNicknameBtn,action_id:169})},disabled:K||ee,"aria-disabled":K||ee?"true":void 0,"data-testid":"set-nickname-btn",children:$.setNicknameBtn}),(0,r.jsx)("div",{className:(0,j.A)(Q.nameDescWrapper),children:(0,r.jsx)(h.A,{isInvalid:!!N,id:T,children:N||"Enter the commenter display name"})})]}),(0,r.jsx)(C,{ref:F,errorCommentField:I,setErrorCommentField:W,dialogType:z,isLoading:V.isLoading}),(0,r.jsxs)("div",{className:(0,j.A)(Q.buttonsWrapper),children:[(0,r.jsx)(o.Ay,{type:"submit",disabled:ee,"data-testid":"submit-btn",...V.isLoading?{state:"busy",busyNotice:"loading..."}:ee?{state:"disabled"}:{state:"auto"},children:"Submit"}),s&&(0,r.jsx)(o.Ay,{variant:"danger",priority:"tertiary",type:"button",onClick:i,"data-testid":"cancel-reply-form-btn",children:"Cancel"})]})]}),"none"!==z&&eu[z]]})}function et(e){let{ref:t,...n}=e;return(0,r.jsx)(v.Suspense,{fallback:null,children:(0,r.jsx)(ee,{...n,ref:t})})}},62268:(e,t,n)=>{n.d(t,{A:()=>s,W:()=>i});var r=n(2619),a=n(46975);n(82155);var o=n(68151);let l={base:{jv:"eGCNgh",q6:"dLUwcr",q3:"dDxYlR",qm:"bFIFQP",s1:"cEqDEh",td:"iRietU",t5:"gAhwfJ",ti:"iaemGh",brsFym:{76:"klOnSG"},fKfEFl:{76:"bsfUtT"}},button:{"1x":"KqcXP"}};function s(e){let{ref:t,children:n=null,inlineStyle:s,styleExtend:i=[],...c}=e;return(0,r.jsx)(a.A,{className:(0,o.A)(l.base,...i),style:s,ref:t,...c,children:n})}function i(e){let{ref:t,children:n=null,inlineStyle:a,styleExtend:s=[],...i}=e;return(0,r.jsx)("button",{className:(0,o.A)(l.base,l.button,...s),style:a,ref:t,...i,children:n})}},67291:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(2619),a=n(46272),o=n(8593);n(82155);var l=n(68151);let s={wrapper:{76:"dHDnIz",95:"jhKQav",kh:"fxvVbr",kl:"llcGuc",km:"eBkqhC",kr:"iivzay",lk:"cjScYX",k4:"dUvWpK",k5:"hRLVFh"},placeholder:{ue:"hHGIsI",d4:"jXmXEB"},spinnerSvg:{17:"jHFOea",d4:"gdPTUr",eu:"bOjOhu",lk:"bEvNbr",s8:"WhAZY",ue:"cRUUAa",l:"jQXeCC",t:"kQuOcB",z:"GZVQz"},spinnerPath:{17:"dDrDcI",l:"jQXeCC",t:"kQuOcB",z:"lnkW","9b":"rnYNS",oy:"gYUVgM",p6:"fbTwse",p8:"fwJipa",pa:"jjWsSD",pi:"IXGqJ",sj:"hFynNp"},shimmerSvg:{17:"dDrDcI",76:"iMssib",l:"jQXeCC",t:"kQuOcB",z:"cvFRYb",h:"cDbPWT"},icon:{ba:"gcQrEv"}},i="alef",c={spinner:e=>{let{hideLogo:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{"aria-hidden":!0,viewBox:"0 0 66 66",className:(0,l.A)(s.spinnerSvg),children:(0,r.jsx)("circle",{className:(0,l.A)(s.spinnerPath),cx:"33",cy:"33",r:"30"})}),t?(0,r.jsx)("div",{className:(0,l.A)(s.placeholder)}):(0,r.jsx)(a.A,{icon:i,styleExtend:[s.icon]})]})},shimmer:e=>{let{hideLogo:t}=e;return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:(0,l.A)(s.placeholder)}):(0,r.jsx)(a.A,{icon:i,styleExtend:[s.icon,s.shimmerSvg]})})}},d=function(e){let{ref:t,hideLogo:n,inlineStyle:a,styleExtend:i=[],busyNotice:d,kind:u="spinner"}=e,m=c[u];return(0,r.jsxs)("div",{className:(0,l.A)(s.wrapper,...i),style:a,"data-testid":"logo-loading-indicator",ref:t,children:[(0,r.jsx)(o.Ay,{children:d||"Loading..."}),(0,r.jsx)(m,{hideLogo:n})]})}},79670:(e,t,n)=>{n.d(t,{default:()=>v});var r=n(32285),a=n(2619),o=n(46496),l=n(38880),s=n(88699),i=n(67291),c=n(76873),d=n(83449),u=n(5084),m=n(82155),b=n(68151),f=n(82255),p=n(82802);let h=(0,p.createServerReference)("40a52fd14684b53e7f084adeb593753ee27c292f52",p.callServer,void 0,p.findSourceMapURL,"default"),k={dropdown:{i6:"hQvhLN",g7:"bRLnE",kWrdPW:{ci:"itsGjb",ce:"cRcfbV",cu:"eumqgR",cq:"lfWzzo"},LoNYL:{i6:"bLEyob"}},dropdownText:{XBEFd:{ba:"cJtokI",f6:"jzXrUE"},eIHxDx:{ba:"iswsIN",f6:"lbqvfo"}},loader:{ue:"cRUUAa",ef:"IVbXa",g7:"EKhXX",ba:"hGtIwE",ci:"gyVaqJ",ce:"dhtgyp"},quoteVariant:{ci:"bkSasJ",ce:"dhtgyp",cu:"ioMMnd"},getMoreCommentsBtn:{95:"kQBRAp",g2:"bMPiZO",g1:"gzedBA"},hideDropdown:{95:"fcXWHl"},commentsList:{95:"kbCXHY",ce:"dhtgyp",ci:"gyVaqJ",cq:"eUwbca",cu:"ioMMnd",g7:"cUXNmd",ly:"fidZXT",LoNYL:{g7:"fYopAU",ly:"iBIsdf"}},liveBlogCommentsList:{ci:"gyVaqJ",ce:"kvMsDB"},quoteVariantList:{cu:"foYUQp",cq:"dcWqqq",ci:"bkSasJ",ce:"dhtgyp"},quoteVariantDropdown:{cu:"ioMMnd",cq:"eUwbca",ci:"bkSasJ",ce:"dhtgyp",kWrdPW:{cu:"hsXCu",cq:"erqUWX",ci:"hlRhsS",ce:"cRcfbV"}}},x=[{text:"Newest first",value:"lastToFirst"},{text:"Oldest first",value:"firstToLast"},{text:"Top-rated first",value:"rate"},{text:"Editors choice",value:"editorsPick"}];function g(e){let{commentsElementId:t,articleId:n,selectedOption:r,fetchType:s,isPending:p,commentsList:g,totalHits:y,setFetchType:v,setIsPending:j,setCommentsList:A,setTotalHits:S}=e,[w,C]=m.useState(null),E=m.useRef(null),N=m.useRef(null),{isFromEmailNotification:B,commentIdParam:R,subcommentIdParam:I,isInView:W}=(0,f.useCommentsContext)(),{setIsInView:F}=(0,f.useCommentsActionsContext)(),D=m.useRef(!1),T=(0,c.A)(),q=(0,o.Ay)();(0,d.A)({elementRef:N,biData:{feature:"Scroll",feature_type:"Content",campaign_name:"Talkbacks"},config:{threshold:.06},disabled:0===g.length});let P=m.useCallback(e=>{e[0].isIntersecting&&F(!0)},[F]),_=(0,u.A)({cb:P,rootMargin:"2000px"});if(m.useEffect(()=>{let e=E?.current;return e&&_&&_.observe(e),()=>{e&&_&&_.unobserve(e)}},[E,_]),m.useEffect(()=>{p||!B||D.current||"idle"===s||(j(!0),(async()=>{try{let e=await h({id:t,count:1,cursor:null,sort:"lastToFirst",commentId:R,articleId:n,subcommentIdParam:I,loadedCount:0,postCacheParams:["sa-comments",t,R||""]});e.html.length&&e.totalHits&&(S(e.totalHits),A(e.html),v("idle"),D.current=!0)}catch(e){console.error(e)}j(!1)})())},[n,R,t,B,A,j,I,s,v,p,y,S]),m.useEffect(()=>{(!B||D.current)&&!p&&W&&"idle"!==s&&(j(!0),(async()=>{try{let e=await h({id:t,count:"getMoreComments"===s?100:10,cursor:"getMoreComments"===s?w:"",sort:null!=r?x[r].value:"lastToFirst",articleId:n,loadedCount:"getMoreComments"===s?g.length:0,postCacheParams:["sa-comments",t],prevTotalHits:y}),a=e?.totalHits;a?a&&(S(a),v("idle"),C(e.next),"getMoreComments"===s?A(t=>[...t,...e.html]):A(e.html)):v("idle")}catch(e){console.error(e)}j(!1)})())},[w,W,B,j,r,n,A,t,p,s,v,g.length,y,S]),!W||p&&"initialCommentsCount"===s)return(0,a.jsx)(i.A,{styleExtend:[k.loader,("QuotesArticle"===q||"MidrugArticle"===q)&&k.quoteVariant],ref:E});let z=!!B&&0===g.length||y&&y>g.length;return(0,a.jsxs)("div",{"data-testid":"comments-list",ref:N,className:(0,b.A)(k.commentsList,"LiveBlogArticle"===q&&k.liveBlogCommentsList,("QuotesArticle"===q||"MidrugArticle"===q)&&k.quoteVariantList),children:[g,z?(0,a.jsx)(l.Ay,{styleExtend:[k.getMoreCommentsBtn],onClick:()=>{v("getMoreComments"),T({feature:"Talkbacks",feature_type:"Content",action_id:148})},"data-testid":"get-more-comments-btn",...p?{state:"busy",busyNotice:"loading..."}:{state:"auto"},children:"More comments"}):null]})}let y=["Date Descending","Date Ascending","Comment Rating","Editors Pick"];function v(e){let t,n,o,l=(0,r.c)(14),{articleId:i,commentsElementId:d,pageType:u}=e,[b,p]=m.useState(0),[h,v]=m.useState("initialCommentsCount"),[j,A]=m.useState(!1);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],l[0]=t):t=l[0];let[S,w]=m.useState(t),{isFromEmailNotification:C}=(0,f.useCommentsContext)(),[E,N]=m.useState(null),B=(0,c.A)();l[1]!==B?(n=e=>{p(e),v("initialCommentsCount"),N(null),B({feature:"Sort talkbacks",feature_type:"Content",campaign_name:null!=e?y[e]:"Date Descending",action_id:104})},l[1]=B,l[2]=n):n=l[2];let R=n;return l[3]!==i||l[4]!==d||l[5]!==S||l[6]!==h||l[7]!==C||l[8]!==j||l[9]!==R||l[10]!==u||l[11]!==b||l[12]!==E?(o=(0,a.jsxs)(a.Fragment,{children:[C||S.length<=1?null:(0,a.jsx)(s.k,{options:x,label:"Sort",styleExtend:[k.dropdown,j&&k.hideDropdown,("QuotesArticle"===u||"MidrugArticle"===u)&&k.quoteVariantDropdown],onChange:R,selectStyleExtend:[k.dropdownText],optionsWrapperStyleExtend:[k.dropdownText],initialSelectedOption:b,"data-testid":"sort-dropdown"}),(0,a.jsx)(g,{articleId:i,commentsElementId:d,selectedOption:b,fetchType:h,setFetchType:v,setIsPending:A,isPending:j,commentsList:S,setCommentsList:w,totalHits:E,setTotalHits:N})]}),l[3]=i,l[4]=d,l[5]=S,l[6]=h,l[7]=C,l[8]=j,l[9]=R,l[10]=u,l[11]=b,l[12]=E,l[13]=o):o=l[13],o}},82255:(e,t,n)=>{n.r(t),n.d(t,{ContextProvider:()=>d,default:()=>b,useCommentsActionsContext:()=>m,useCommentsContext:()=>u});var r=n(32285),a=n(2619),o=n(61525),l=n(31056),s=n(82155);let i=s.createContext(void 0),c=s.createContext(void 0);function d(e){let{children:t}=e,[n,r]=s.useState(),[o,d]=s.useState(),u=(0,l.useSearchParams)(),m=u.get("commentId"),b=u.get("subcommentId"),f=!!m&&!!b,[p,h]=s.useState(f),k=s.useCallback(()=>{r("")},[]),x=s.useMemo(()=>({replyToCommentId:n,replyToAuthor:o,isInView:p,isFromEmailNotification:f,commentIdParam:m,subcommentIdParam:b}),[n,o,p,f,m,b]),g=s.useMemo(()=>({setReplyToCommentId:r,setReplyToAuthor:d,cancelReplyForm:k,setIsInView:h}),[k]);return(0,a.jsx)(i,{value:x,children:(0,a.jsx)(c,{value:g,children:t})})}function u(){let e=s.use(i);if(void 0===e)throw Error("useCommentsContext must be used within a CommentsContext.");return e}function m(){let e=s.use(c);if(void 0===e)throw Error("useCommentsActionsContext must be used within a CommentsActionsContext.");return e}function b(e){let t,n=(0,r.c)(2),{children:l}=e;return(0,o.A)()?(n[0]!==l?(t=(0,a.jsx)(d,{children:l}),n[0]=l,n[1]=t):t=n[1],t):null}},82586:(e,t,n)=>{n.r(t),n.d(t,{ContextProvider:()=>s,default:()=>d,useReportAbuseActionsContext:()=>c,useReportAbuseContext:()=>i});var r=n(2619),a=n(82155);let o=a.createContext(void 0),l=a.createContext(void 0);function s(e){let{children:t}=e,[n,s]=a.useState(),[i,c]=a.useState(null),[d,u]=a.useState(!1),[m,b]=a.useState("auto"),[f,p]=a.useState(!1),h=a.useMemo(()=>({reportAbuseStatus:n,captchaKey:i,shouldInitCaptcha:d,btnState:m,hasAlreadyVoted:f}),[m,i,f,n,d]),k=a.useMemo(()=>({setReportAbuseStatus:s,setCaptchaKey:c,setShouldInitCaptcha:u,setBtnState:b,setHasAlreadyVoted:p}),[]);return(0,r.jsx)(o,{value:h,children:(0,r.jsx)(l,{value:k,children:t})})}function i(){let e=a.use(o);if(void 0===e)throw Error("useReportAbuseContext must be used within a ReportAbuseContext.");return e}function c(){let e=a.use(l);if(void 0===e)throw Error("useReportAbuseActionsContext must be used within a ReportAbuseActionsContext.");return e}function d(e){let{children:t}=e;return(0,r.jsx)(s,{children:t})}},87503:(e,t,n)=>{n.d(t,{Ay:()=>r});let r=n(12991).default},88114:(e,t,n)=>{let r;n.r(t),n.d(t,{DEFAULT_ELEMENT:()=>h,default:()=>x});var a=n(2619),o=n(58984),l=n(47987),s=n(64526),i=n(11721);let c=function(e){return(r=null==r?Number.parseInt(getComputedStyle(document.documentElement).fontSize)||0:r)&&Number.parseFloat(e)*r||0};var d=n(13739),u=n(82155),m=n(68151);let b="0.75rem",f="0.5rem",p={elementsWrapper:{76:"huYRdW",fCtNMB:"kqcfRB",lk:"bEvNbr",s8:"gdRGRW",eu:"caCrFV",v6:"krAhQG"},inverseVariant:{jpqFAW:"iWxEKK",glCxqy:"bDXnqH",fCtNMB:"jcPrvU",gkMtuA:"hByOXY",imNhjg:"hoczMS"},popover:{60:"izykGz","1x":"iZNbEn",g2:"euSzUE",g1:"joUZpP","5v":"dMldmn","5x":"izpuPX","3q":"inVqGg","3o":"jpXWzO","3m":"gcvawS","3t":"ctibpX","3s":"hpBjJb",kh:"eejUxl","4q":"euFRsW","4s":"bTnXNj","4r":"hszzXi",kl:"cfEHVR","4u":"jfUYQy","4w":"hXXzlB","4v":"itlHSH",km:"kQDwxQ","5t":"ctDOVj","5z":"FwRrA",kr:"bdXHYu"},arrowKeepInBound:{lk:"bEvNbr",bIphqo:"eUirwo",s8:"jbTRU",eu:"kFDthg",ue:"cFMWHx",se:"dqImtA"},arrowBehind:{lk:"bEvNbr",bIphqo:"eUirwo",s8:"fsoPQz",eu:"bRScxA",ue:"hiDeJu","1x":"liFA_di",se:"dqImtA",v6:"iYxGWt"},arrowBehindBorderRadiusBlock:{"5v":"dcAuKZ","3q":"dpaEwS"},arrowBehindBorderRadiusInline:{"5x":"llpVxN","3o":"jvbZfh"},arrowFront:{lk:"bEvNbr",bIphqo:"eUirwo",s8:"cDlTOD",eu:"bZPMts",ue:"iTSRZl","1x":"fJLIOF",se:"dqImtA",v6:"hTKfVG"},arrowFrontBorderRadiusBlock:{"5v":"kfEoCQ","3q":"fdJDfg"},arrowFrontBorderRadiusInline:{"5x":"kkFQYt","3o":"gPcjvg"},topArrowPadding:{kr:"dmKgnC"},bottomArrowPadding:{kh:"dPFrWx"},leftArrowPadding:{kn:"JxWnH"},rightArrowPadding:{ko:"cVJMrm"}},h="div";function k(e){let{as:t,children:n=null,inlineStyle:r,styleExtend:k=[],refersToRef:x,variant:g="default",placement:y="top",openOn:v,keepInView:j,isOpen:A,kind:S="popover",defaultIsOpen:w,onToggle:C,closeOn:E="esc+blur",offsetValue:N=0,...B}=e,R=u.useId(),I=u.useRef(null),[W,F]=u.useState(w||!1),D=null!=A?A:W,T=function(e){if("number"==typeof e)return e;if("string"==typeof e)return c(e);if("object"==typeof e){let t={};for(let n in e){let r=e[n];"string"==typeof r&&(t[n]=c(r))}return t}return 0}(N);null==A||C||console.warn(`<Popover>: You set a value to "isOpen", making it a controlled component,
      but did not set an "onToggle" handler,
      making the controlling component unaware of internal changes.`);let q="popover"===S,P=v||(q?"click":"hover+focus"),_="blur"===E||"esc+blur"===E,z=null!==n,M=u.useCallback(e=>{C?C(e):F(e)},[C]),{x:L,y:X,context:O,middlewareData:V,refs:H,placement:G}=(0,o.we)({placement:y,open:D,onOpenChange:M,middleware:[(0,l.cY)(T),...j?[(0,l.BN)(),(0,l.UU)()]:[],...z?[(0,s.UE)({element:I})]:[]],whileElementsMounted:i.ll}),{getReferenceProps:K,getFloatingProps:U}=(0,o.bv)([(0,o.Mk)(O,{enabled:"hover+focus"===P||"hover"===P}),(0,o.iQ)(O,{enabled:"hover+focus"===P||"focus"===P}),(0,o.kp)(O,{enabled:"click"===P}),(0,o.It)(O,{role:"dialog"}),(0,o.s9)(O,E&&{enabled:"controlled"!==E,escapeKey:"esc"===E||"esc+blur"===E,outsidePress:_})]),J={top:"bottom",right:"left",bottom:"top",left:"right"}[G.split("-")[0]],Y=u.useMemo(()=>V.arrow?.x,[V.arrow?.x]),Q=u.useMemo(()=>V.arrow?.y,[V.arrow?.y]),Z=`calc((${b} * -0.5) + 1px + ${f})`,$=`calc((${b} * -0.5) + (1px * 2 + ${f}))`,ee=`calc((${b} * -0.7) + 1px + ${f})`;if(u.useLayoutEffect(()=>{let e=x?.current,{onClick:t,onKeyDown:n,onKeyUp:r,onMouseDown:a,onPointerDown:o,onFocus:l,onBlur:s,onMouseMove:i,onPointerEnter:c,...d}=K(),u={click:t,keydown:n,keyup:r,mousedown:a,pointerdown:o,focus:l,blur:s,mousemove:i,pointerenter:c};return e&&(H.setReference(e),e.setAttribute("aria-describedby",R),Object.entries(u).forEach(t=>{let[n,r]=t;"function"==typeof r&&e.addEventListener(n,r)}),Object.entries(d).forEach(t=>{let[n,r]=t;"function"!=typeof r&&null!=r&&e.setAttribute(n,r)})),()=>{e&&(e.removeAttribute("aria-describedby"),Object.entries(u).forEach(t=>{let[n,r]=t;"function"==typeof r&&e.removeEventListener(n,r)}),Object.entries(d).forEach(t=>{let[n,r]=t;"function"!=typeof r&&e.removeAttribute(n)}))}},[K,R,x,H]),!x?.current)return null;let et=`${J}ArrowPadding`,en=G.includes("top")||G.includes("bottom"),er=(0,a.jsx)("div",{className:(0,m.A)(p.elementsWrapper,J&&p[et],"inverse"===g&&p.inverseVariant),ref:H.setFloating,style:{"--y":`${X}px`,"--x":`${L}px`,...r},...U(),children:z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t||h,{id:R,role:"tooltip"===S?"tooltip":"region","data-testid":"popover",className:(0,m.A)(p.popover,...k),...B,children:n}),(0,a.jsxs)("div",{style:{"--arrowX":null!=Y?`${Y}px`:"","--arrowY":null!=Q?`${Q}px`:""},children:[(0,a.jsx)("div",{className:(0,m.A)(p.arrowKeepInBound),ref:I,style:{...J&&{[J]:ee}}}),(0,a.jsx)("div",{className:(0,m.A)(p.arrowBehind,en?p.arrowBehindBorderRadiusBlock:p.arrowBehindBorderRadiusInline),style:{...J&&{[J]:Z}}}),(0,a.jsx)("div",{className:(0,m.A)(p.arrowFront,en?p.arrowFrontBorderRadiusBlock:p.arrowFrontBorderRadiusInline),style:{...J&&{[J]:$}}})]})]})});return(0,a.jsx)(d.A,{children:(0,a.jsx)(o.XF,{children:D&&(q?(0,a.jsx)(o.s3,{context:O,modal:!_,order:["content","floating","reference"],children:er}):er)})})}let x=function(e){return(0,a.jsx)(k,{...e})}},88699:(e,t,n)=>{n.d(t,{A:()=>u,k:()=>m});var r=n(2619),a=n(58368),o=n(46272),l=n(5084),s=n(82155),i=n(68151);let c={base:{76:"gkIEgl",95:"gSBWlu",hcTwTr:"gNdlfU","9t":"iMkoWi",lk:"cjScYX",ba:"iKjpVA",f6:"cVaJzg",eIHxDx:{ba:"iswsIN",f6:"lbqvfo"}},btn:{4:"foGVKH",60:"izykGz",95:"gSBWlu",ef:"kJzccJ","7o":"haEjPJ",bu:"iLdtFu","1x":"KqcXP","5v":"fuRihO","5x":"hnIqRG","3o":"bpwkrd","3q":"jMcElf",td:"fXEOVo",t5:"gAhwfJ",ti:"iaemGh","3m":"krceRx","3t":"ctibpX","3s":"hpBjJb",kh:"cIWLIu","5t":"idVdqz","5z":"FwRrA",kr:"hiQXNG","4q":"lfLgrc","4s":"bTnXNj","4r":"hszzXi",kl:"bWNKbL","4u":"gBgjMX","4w":"hXXzlB","4v":"itlHSH",km:"ddynka",kjzgOA:{jt:"jYFvoK",dLtGRG:"hwfYkX"},brsFym:{dLtGRG:"eVDAsw"}},labelWrapper:{4:"foGVKH",60:"fcSDbz",63:"bLIxaN",95:"gSBWlu",lk:"bEvNbr",s8:"WhAZY",eb:"cuuCgJ",v6:"jvKoxA",ko:"jWtTdy",kn:"iSNqlA",kh:"eDnzIT","5t":"eZTZuK","5z":"FwRrA",kr:"dCdWKc"},label:{76:"dvkVMF",95:"cpOcAb",lk:"cjScYX","1x":"KqcXP",se:"hlQWNe",s8:"kNfNrW",eb:"eAUDaE",bu:"iLdtFu",ba:"gVscJz",f6:"kvNqZl",eIHxDx:{ba:"hyhpVP",f6:"kRmCJO"}},disabled:{lj:"eDssNQ",j9:"iItPPl"},disabledOption:{76:"OSxLF"},icon:{se:"kLFcZz",ba:"iKjpVA",f6:"cVaJzg"},optionsWrapper:{95:"gSBWlu","9t":"iMkoWi",lk:"bEvNbr",eb:"bnjeIC",ue:"jaRgNg",ko:"kjGUyy",kn:"hCczan",k5:"llUCyD","1x":"hXoEex",v6:"hTKfVG",jOFsBf:{jv:"jmtWSQ"},fQdabW:{o2:"kCazCA"}},dropdownOption:{4:"foGVKH",95:"gSBWlu","8x":"jsvbrX","1x":"hXoEex","7o":"cUcBkx","4q":"lfLgrc","4s":"bTnXNj","4r":"hszzXi",kl:"bWNKbL","4u":"gBgjMX","4w":"hXXzlB","4v":"itlHSH",km:"ddynka",kr:"daWMfK",kh:"dRUifP"},dropdownOptionBorderBottom:{lk:"cjScYX",dolCMd:{63:"lgAqSK","1x":"hEgWHg","8h":"fqXcHQ",d4:"iglUlY",eu:"dbxzrM",lk:"dyMCpl",ue:"gDuAJU"}},dropdownOptionBorderTop:{lk:"cjScYX",gYHkBN:{"1x":"kCuzRe","8h":"julXB",d4:"kCTirT",eu:"ChfZc",lk:"kvHVCE",ue:"bQvqKh",s8:"gAWTvW"}},dropdownOptionBorderRadiusTop:{"5v":"fuRihO","5x":"hnIqRG"},dropdownOptionBorderRadiusBottom:{"3o":"bpwkrd","3q":"jMcElf"},selected:{"1x":"gdLhDV"},brandVariant:{gfeKqM:"otyCH",dLtGRG:"bRGtNQ",kPHaHx:"dMYHDu",zGjIL:"dFqbIM",lgQVni:"gYMCHz"},neutralVariant:{gfeKqM:"kfuWfP",dLtGRG:"kDekGM",kPHaHx:"cYkEOK",zGjIL:"fIiGqR"},isInvalid:{dLtGRG:"kaglYn",lgQVni:"fQpXra"},paddingDropdownOption:{km:"rQuaX"},zIndexDropdown:{v6:"JeNDC"},required:{76:"flyuuT",g2:"gceMZP"},visuallyHidden:{d4:"edsxqC",ue:"lksDzB",kr:"kVZHcH",ko:"dwawJR",kh:"iATxZH",kn:"jQenOz",lu:"dXAKYn",j9:"UXrzu",lk:"bEvNbr"}},d=e=>{let{text:t,setActualSelectedOption:n,setVisuallySelectedOption:a,setIsOpen:l,currentOption:s,selectedOption:d,isLastOption:u,actualSelectedOption:m,variant:b,disabled:f,onChange:p,hideCheckIcon:h=!1,optionStyleExtend:k=[],actualSelectedOptionStyleExtend:x=[]}=e,g=m===s?x:[],y=0===s,v=d===s;return(0,r.jsxs)("div",{role:"option",className:(0,i.A)(c.dropdownOption,v&&c.selected,f&&c.disabledOption,c.dropdownOptionBorderTop,u&&c.dropdownOptionBorderBottom,y&&c.dropdownOptionBorderRadiusTop,u&&c.dropdownOptionBorderRadiusBottom,m!==s&&!h&&c.paddingDropdownOption,...g,...k),onClick:f?void 0:()=>{l(!1),m!==s&&(a(s),n(s),p?.(s))},onMouseMove:()=>a(s),"aria-selected":v?"true":void 0,tabIndex:-1,id:`dropdown-option-${s}`,"aria-disabled":f,children:[m!==s||h?null:(0,r.jsx)(o.A,{icon:"check",variant:b}),t]})};function u(e){let{ref:t,dropdownIcon:n="chevron",hideCheckIconOnSelectedOption:u=!1,options:m,variant:f="brand",label:p,onChange:h,onInput:k,onInvalid:x,initialSelectedOption:g,controlledComponent:y,disabled:v,description:j,isInvalid:A,required:S=!1,inlineStyle:w,styleExtend:C=[],selectStyleExtend:E=[],optionsWrapperStyleExtend:N=[],dropdownStyleExtend:B=[],dropdownIconStyleExtend:R=[],optionStyleExtend:I=[],actualSelectedOptionStyleExtend:W=[],...F}=e,D=s.useId(),T=s.useId(),q=s.useRef(null),P=s.useRef(null);s.useImperativeHandle(t,()=>P.current);let[_,z]=s.useState(!1),[M,L]=s.useState(g),X=y?y.state:M,[O,V]=s.useState(g),[H,G]=s.useState({}),K=y?y.setState:L,U=s.useId(),J=s.useRef(null),Y=y?.keyboardControl==="controlled",[Q,Z]=s.useState(!1),$=`${f}Variant`,ee=q.current?.offsetHeight,et=s.useId(),en=s.useCallback(e=>{if(P.current){P.current.value="number"==typeof e&&m[e].value||"";let t=new Event("input",{bubbles:!0});P.current.dispatchEvent(t)}h?.(e)},[h,m]),er=s.useCallback(e=>{null!==e&&(q.current&&null!=X&&!Q&&G(function(e){let{btnElement:t,selectedOption:n}=e;return{top:-(t.clientHeight*n)}}({btnElement:q.current,selectedOption:X})),J.current=e)},[X,Q]);s.useLayoutEffect(()=>{if(_&&J.current&&!Q){let e=function(e,t){let n=window.innerHeight>e.bottom+8,r=e.top>=8,a=e.top>8;if(n&&a)return null;if(r&&a)return{bottom:0};let o=window.innerHeight-e.bottom;return{top:0,...e.height>o?{maxHeight:`${Math.floor(o+(t||0)-8)}px`}:{}}}(J.current.getBoundingClientRect(),ee);e&&G(e),e?.maxHeight&&Z(!0)}},[_,J.current]),s.useEffect(()=>{V(X)},[X]),s.useEffect(()=>{_&&J.current&&J.current.focus();let e=e=>{[" ","ArrowUp","ArrowDown"].includes(e.key)&&e.preventDefault()};return _&&y?.preventKeyboardScrolling!=="controlled"&&window.addEventListener("keydown",e),()=>{y?.preventKeyboardScrolling!=="controlled"&&window.removeEventListener("keydown",e)}},[y?.preventKeyboardScrolling,_]);let ea=s.useCallback(e=>{let t=e[0];t.isIntersecting||t.target.scrollIntoView({block:"nearest",behavior:"instant"})},[]),eo=(0,l.A)({cb:ea,threshold:1});if(s.useEffect(()=>{let e=null!=O&&J?.current?.children[O];return e&&eo&&eo.observe(e),()=>{e&&eo&&eo.unobserve(e)}},[eo,O]),s.useEffect(()=>{if(_&&J.current&&X&&ee){let e=ee*X;J.current.scrollTo(0,e)}},[_,X,ee]),y){if(!y.setState)throw Error("<Dropdown />: controlled component must have setState");if(!Object.keys(y).find(e=>"state"===e))throw Error("<Dropdown />: controlled component must have state")}let el=(0,r.jsxs)("span",{children:[p,S?(0,r.jsx)("span",{className:(0,i.A)(c.required),children:"*"}):null]});return m.length>0?(0,r.jsxs)(b,{styleExtend:C,children:[(0,r.jsxs)("div",{className:(0,i.A)(c.base,c[$],_&&c.zIndexDropdown,A&&!_&&c.isInvalid,...B),style:w,children:[p&&null!=X&&(0,r.jsx)("div",{className:(0,i.A)(c.labelWrapper),children:(0,r.jsx)("label",{htmlFor:D,className:(0,i.A)(c.label,v&&c.disabled),children:el})}),(0,r.jsxs)("button",{id:D,className:(0,i.A)(c.btn,v&&c.disabled,...E),onClick:()=>{z(e=>!e)},role:"combobox","aria-controls":U,"aria-expanded":_,"aria-labelledby":p?T:void 0,type:"button","data-testid":"dropdown-btn",ref:q,onKeyDown:Y?void 0:e=>{"Enter"===e.key&&e.preventDefault(),("ArrowUp"===e.key||"ArrowDown"===e.key)&&z(!0)},disabled:v,children:[null!=X?m[X]?.text:el||m[0].text,(0,r.jsx)(o.A,{icon:n,styleExtend:["chevron"===n&&c.icon,...R]})]}),_&&(0,r.jsx)("div",{className:(0,i.A)(c.optionsWrapper,...N),ref:er,onKeyDown:Y?void 0:e=>{"ArrowUp"===e.key&&V(e=>null==e?m.length-1:function(e,t){let n=e-1;if(0===e)return e;for(;t[n].disabled;){if(0===n)return e;n-=1}return n}(e,m)),"ArrowDown"===e.key&&V(e=>null==e?0:function(e,t){if(e===t.length-1)return e;let n=e+1;for(;t[n].disabled;){if(n===t.length-1)return e;n+=1}return n}(e,m));let t="Enter"===e.key||" "===e.key||"Tab"===e.key,n="Escape"===e.key;(t||n)&&(e.preventDefault(),z(!1),q.current&&q.current.focus()),n&&V(X),t&&(K(O),O!==X&&en(O))},style:{...H},role:"listbox","aria-labelledby":U,"aria-activedescendant":`dropdown-option-${X}`,tabIndex:-1,onBlur:e=>{e.relatedTarget?.getAttribute("role")!=="option"&&e.relatedTarget?.id!==D&&(V(X),z(!1))},"data-testid":"dropdown-options-wrapper",children:m.map((e,t)=>{let{text:n,disabled:a}=e;return(0,r.jsx)(d,{text:n,setActualSelectedOption:K,setVisuallySelectedOption:V,setIsOpen:z,currentOption:t,selectedOption:O,disabled:a,isLastOption:t===m.length-1,actualSelectedOption:X,hideCheckIcon:u,actualSelectedOptionStyleExtend:W,optionStyleExtend:I,variant:f,onChange:en},n)})})]}),j?(0,r.jsx)(a.A,{isInvalid:A,id:et,children:j}):null,(0,r.jsxs)("select",{className:(0,i.A)(c.visuallyHidden),ref:P,tabIndex:-1,onInput:k,onInvalid:x,required:S,value:"number"==typeof X?m[X].value:"",...F,children:[(0,r.jsx)("option",{value:""}),...m.map(e=>{let{text:t,value:n,disabled:a}=e;return(0,r.jsx)("option",{value:n,disabled:!!a,children:t},n)})]})]}):null}let m=s.memo(u);function b(e){let{styleExtend:t,children:n}=e;return(0,r.jsx)("div",{className:(0,i.A)(...t),children:n})}},91923:(e,t,n)=>{n.d(t,{Ay:()=>r});let r=n(47398).default},94256:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(32285),a=n(2619),o=n(38880);n(82155),n(68151);var l=n(82255);let s={replyBtn:{km:"cWyozt",kl:"leIGKB",bmDBbg:{ba:"gPowFU",f6:"eaJJqD"}}};function i(e){let t,n,i=(0,r.c)(7),{authorName:c,parentCommentId:d}=e,{setReplyToAuthor:u,setReplyToCommentId:m}=(0,l.useCommentsActionsContext)();i[0]!==c||i[1]!==d||i[2]!==u||i[3]!==m?(t=()=>{m(d),c&&u(c)},i[0]=c,i[1]=d,i[2]=u,i[3]=m,i[4]=t):t=i[4];let b=t;return i[5]!==b?(n=(0,a.jsx)(o.Ay,{priority:"tertiary",styleExtend:[s.replyBtn],onClick:b,"data-testid":"reply-btn",children:"Reply"}),i[5]=b,i[6]=n):n=i[6],n}}}]);
//# sourceMappingURL=1815-ca333c415080fd87.js.map